<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>博客展示ovo-博客展示ovo</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.3.1">
    <link rel="preload stylesheet" href="/blog/assets/style.C3IpHLV0.css" as="style">
    <script type="module" src="/blog/assets/chunks/metadata.1c2bbd70.js"></script>
    <script type="module" src="/blog/assets/app.B-PRbVRY.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.GYzjcnJh.js">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.Cm92knlu.js">
    <link rel="modulepreload" href="/blog/assets/other_task_seventh.md.Cl1sneHB.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar top" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-ab179fa1><a class="title" href="/blog/" data-v-ab179fa1><!--[--><!--]--><!----><span data-v-ab179fa1>一昂</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/linux/grep" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Linux</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>前端</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>基础</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/blog/front/html/base" data-v-43f1e123><!--[-->HTML<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/blog/front/css/base" data-v-43f1e123><!--[-->CSS<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/blog/front/js" data-v-43f1e123><!--[-->JavaScript<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>框架</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/blog/front/bootstrap5" data-v-43f1e123><!--[-->BootStrap5<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>后端</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/nginx/install" data-v-43f1e123><!--[-->Nginx<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/backend/caddy" data-v-43f1e123><!--[-->Caddy<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/backend/docker/install" data-v-43f1e123><!--[-->Docker<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/db/mysql/install" data-v-43f1e123><!--[-->数据库<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/python/install" data-v-43f1e123><!--[-->Python3<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/backend/go/" data-v-43f1e123><!--[-->GoLang<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/backend/java/" data-v-43f1e123><!--[-->Java<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/other/os" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>其它</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/devops/jenkins" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>运维</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/classical/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>玄</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/tools/some_tool_url" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>工具软件</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/network/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>网络</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/fq/clash-meta/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>科学</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/video/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>视频</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/hahasusu" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/hahasusu" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>Task</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/first/index" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第一周</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/second" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第二周</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/third" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第三周</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/fourth" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第四周</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/fifth" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第五周</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/sixth" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第六周</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/seventh" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第七周</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/tenth" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第十周</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/task/eleven" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第十一周</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/os" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>对象存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/ali_oss" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>对象存储阿里OSS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/bitiful" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>对象存储缤纷云</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/markdown" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Markdown</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/git" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/gitea" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Gitea</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/gitlab" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Gitlab的使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/fastcgi" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>FastCGI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/share-sync" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>文件共享和同步</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/sftpgo" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Sftpgo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/os" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Index</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/font" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>字体</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/vitepress" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Vitepress</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/nav" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>导航</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/loadbalance" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>负载均衡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/git" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/fastcgi" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>FastCGI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/share-sync" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>文件同步和共享</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/other/vmware" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>VMWare设置</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>目录</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _blog_other_task_seventh" data-v-39a288b8><div><h2 id="_1-总结pg和mysql的优劣势。" tabindex="-1">1. 总结pg和mysql的优劣势。 <a class="header-anchor" href="#_1-总结pg和mysql的优劣势。" aria-label="Permalink to &quot;1. 总结pg和mysql的优劣势。&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">MySQL和PostgreSQL（简称PG）都是流行的关系型数据库管理系统（RDBMS），它们在许多方面有着不同的优劣势。以下是对它们的优劣势的总结：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">MySQL的优势：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">性能：MySQL以其高效的查询性能而闻名，适用于高并发的应用程序。</span></span>
<span class="line"><span style="color:#E2931D;">简单易用：MySQL具有较为简单的安装和配置过程，易于上手和管理。</span></span>
<span class="line"><span style="color:#E2931D;">社区支持：MySQL有一个庞大的用户社区，提供了丰富的文档、教程和支持资源。</span></span>
<span class="line"><span style="color:#E2931D;">可扩展性：MySQL能够在处理大量数据时持续提供可靠的性能，并能通过水平和垂直扩展来满足不同规模的应用需求。</span></span>
<span class="line"><span style="color:#E2931D;">广泛应用：由于其普及度高，很多应用程序和工具都对MySQL提供了良好的支持和集成。</span></span>
<span class="line"><span style="color:#E2931D;">PostgreSQL的优势：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">功能强大：PostgreSQL具有广泛的功能集，包括复杂的数据类型、触发器、存储过程、地理空间和全文搜索等功能。</span></span>
<span class="line"><span style="color:#E2931D;">可靠性：PostgreSQL以其强大的数据完整性和可靠性而著称，支持事务和ACID（原子性、一致性、隔离性和持久性）属性，适用于对数据完整性要求较高的应用场景。</span></span>
<span class="line"><span style="color:#E2931D;">扩展性和可定制性：PostgreSQL提供了丰富的扩展机制，可以通过插件来实现更多的功能，并能够根据具体需求进行自定义开发。</span></span>
<span class="line"><span style="color:#E2931D;">完整的SQL支持：PostgreSQL支持最新的SQL标准，并提供了更多高级的查询和优化功能。</span></span>
<span class="line"><span style="color:#E2931D;">开源社区支持：PostgreSQL是一个开源项目，拥有活跃的社区，提供了广泛的帮助和支持。</span></span>
<span class="line"><span style="color:#E2931D;">总体而言，MySQL适用于需要高性能和简单部署的应用程序，而PostgreSQL适用于复杂的数据模型和对数据完整性和可靠性有更高要求的应用程序。选择适合的数据库管理系统取决于实际需求、数据量和应用场景。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_2-总结pg二进制安装和编译安装" tabindex="-1">2. 总结pg二进制安装和编译安装 <a class="header-anchor" href="#_2-总结pg二进制安装和编译安装" aria-label="Permalink to &quot;2. 总结pg二进制安装和编译安装&quot;">​</a></h2><h3 id="二进制安装-rocky8" tabindex="-1">二进制安装（Rocky8） <a class="header-anchor" href="#二进制安装-rocky8" aria-label="Permalink to &quot;二进制安装（Rocky8）&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">1、下载二进制包</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># sudo dnf -qy module disable postgresql</span></span>
<span class="line"><span style="color:#E2931D;">2、在线安装postgresql服务</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># sudo dnf install -y postgresql14-server</span></span>
<span class="line"><span style="color:#E2931D;">3、初始化数据库</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># sudo /usr/pgsql-14/bin/postgresql-14-setup initdb</span></span>
<span class="line"><span style="color:#E2931D;">4、设置自启动数据库</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># sudo systemctl enable postgresql-14</span></span>
<span class="line"><span style="color:#E2931D;">5、启动数据库</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># sudo systemctl start postgresql-14</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="编译安装" tabindex="-1">编译安装 <a class="header-anchor" href="#编译安装" aria-label="Permalink to &quot;编译安装&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#安装相关依赖</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql postgresql-14.2</span><span style="color:#39ADB5;">]</span><span style="color:#90A4AE;"># </span></span>
<span class="line"><span style="color:#E2931D;">yum</span><span style="color:#91B859;"> -y</span><span style="color:#91B859;"> install</span><span style="color:#91B859;"> gcc</span><span style="color:#91B859;"> make</span><span style="color:#91B859;"> readline-devel</span><span style="color:#91B859;"> zlib-devel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#编译安装</span></span>
<span class="line"><span style="color:#E2931D;">./configure</span><span style="color:#91B859;"> --prefix=/apps/pgsql</span></span>
<span class="line"><span style="color:#E2931D;">make</span><span style="color:#91B859;"> -j</span><span style="color:#F76D47;"> 2</span><span style="color:#91B859;"> world</span></span>
<span class="line"><span style="color:#E2931D;">make</span><span style="color:#91B859;"> install-world</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#创建pgsql账号密码</span></span>
<span class="line"><span style="color:#E2931D;">useradd</span><span style="color:#91B859;"> -s</span><span style="color:#91B859;"> /bin/bash</span><span style="color:#91B859;"> -m</span><span style="color:#91B859;"> -d</span><span style="color:#91B859;"> /home/postgres</span><span style="color:#91B859;"> postgres</span></span>
<span class="line"><span style="color:#6182B8;">echo</span><span style="color:#91B859;"> -e</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">123456\n123456</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">passwd</span><span style="color:#91B859;"> postgres</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql postgresql-14.2</span><span style="color:#39ADB5;">]</span><span style="color:#90A4AE;"># useradd -s /bin/bash -m -d /home/postgres postgres</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql postgresql-14.2</span><span style="color:#39ADB5;">]</span><span style="color:#90A4AE;"># echo -e </span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">123456\n123456</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">passwd</span><span style="color:#91B859;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;">Changing</span><span style="color:#91B859;"> password</span><span style="color:#91B859;"> for</span><span style="color:#91B859;"> user</span><span style="color:#91B859;"> postgres.</span></span>
<span class="line"><span style="color:#E2931D;">New</span><span style="color:#91B859;"> password:</span><span style="color:#91B859;"> BAD</span><span style="color:#91B859;"> PASSWORD:</span><span style="color:#91B859;"> The</span><span style="color:#91B859;"> password</span><span style="color:#91B859;"> is</span><span style="color:#91B859;"> shorter</span><span style="color:#91B859;"> than</span><span style="color:#F76D47;"> 8</span><span style="color:#91B859;"> characters</span></span>
<span class="line"><span style="color:#E2931D;">Retype</span><span style="color:#91B859;"> new</span><span style="color:#91B859;"> password:</span><span style="color:#91B859;"> passwd:</span><span style="color:#91B859;"> all</span><span style="color:#91B859;"> authentication</span><span style="color:#91B859;"> tokens</span><span style="color:#91B859;"> updated</span><span style="color:#91B859;"> successfully.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#创建数据目录并授权</span></span>
<span class="line"><span style="color:#E2931D;">mkdir</span><span style="color:#91B859;"> -pv</span><span style="color:#91B859;"> /pgsql/data/</span></span>
<span class="line"><span style="color:#E2931D;">chown</span><span style="color:#91B859;"> -R</span><span style="color:#91B859;"> postgres.postgres</span><span style="color:#91B859;"> /pgsql/data/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#切换账号</span></span>
<span class="line"><span style="color:#E2931D;">su</span><span style="color:#91B859;"> -</span><span style="color:#91B859;"> postgres</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#设置环境变量</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># vim /etc/profile.d/pgslq.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="color:#39ADB5;">********************************************************************</span></span>
<span class="line"><span style="color:#9C3EDA;">export</span><span style="color:#90A4AE;"> PGHOME</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;">/apps/pgsql</span></span>
<span class="line"><span style="color:#9C3EDA;">export</span><span style="color:#90A4AE;"> PATH</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;">$PGHOME/bin/:$PATH</span></span>
<span class="line"><span style="color:#9C3EDA;">export</span><span style="color:#90A4AE;"> PGDATA</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;">/pgsql/data</span></span>
<span class="line"><span style="color:#9C3EDA;">export</span><span style="color:#90A4AE;"> PGUSER</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;">postgres</span></span>
<span class="line"><span style="color:#9C3EDA;">export</span><span style="color:#90A4AE;"> MANPATH</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;">/apps/pgsql/share/man:$MANPATH  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#生效环境变量</span></span>
<span class="line"><span style="color:#6182B8;">.</span><span style="color:#91B859;"> /etc/profile.d/pgslq.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#初始化数据库</span></span>
<span class="line"><span style="color:#E2931D;">initdb</span><span style="color:#91B859;"> -D</span><span style="color:#91B859;"> /pgsql/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#启动数据库并生成日志</span></span>
<span class="line"><span style="color:#E2931D;">pg_ctl</span><span style="color:#91B859;"> -l</span><span style="color:#91B859;"> logfile</span><span style="color:#91B859;"> start</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#创建开机自启动服务：方法1</span></span>
<span class="line"><span style="color:#E2931D;">cp</span><span style="color:#91B859;"> /usr/local/src/postgresql-14.2/contrib/start-scripts/linux</span><span style="color:#91B859;"> /etc/init.d/postgresql</span></span>
<span class="line"><span style="color:#E2931D;">chmod</span><span style="color:#91B859;"> +x</span><span style="color:#91B859;"> /etc/init.d/postgresql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#修改启动文件</span></span>
<span class="line"><span style="color:#E2931D;">/etc/init.d/postgresql</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># Installation prefix</span></span>
<span class="line"><span style="color:#90A4AE;">prefix</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">/apps/pgsql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># Data directory</span></span>
<span class="line"><span style="color:#90A4AE;">PGDATA</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">/pgsql/data</span><span style="color:#39ADB5;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#设置开机自启动</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># vim /etc/rc.local </span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#生效配置</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># systemctl daemon-reload </span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#设置自启动</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># systemctl enable --now postgresql.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h2 id="_3-总结pg服务管理相关命令-pg-ctl-和pgsql命令选项及示例和不同系统的初始化操作" tabindex="-1">3. 总结pg服务管理相关命令 pg_ctl 和pgsql命令选项及示例和不同系统的初始化操作 <a class="header-anchor" href="#_3-总结pg服务管理相关命令-pg-ctl-和pgsql命令选项及示例和不同系统的初始化操作" aria-label="Permalink to &quot;3. 总结pg服务管理相关命令 pg_ctl 和pgsql命令选项及示例和不同系统的初始化操作&quot;">​</a></h2><p><strong>开启服务</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#开启服务</span></span>
<span class="line"><span style="color:#E2931D;">pg_ctl</span><span style="color:#91B859;"> start</span><span style="color:#90A4AE;"> [-w] </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">-t seconds</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-s</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-D datadir</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-l filename</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-o options</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-p </span></span>
<span class="line"><span style="color:#90A4AE;">path</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-c</span><span style="color:#39ADB5;">]</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#参数说明如下。</span></span>
<span class="line"><span style="color:#E2931D;">start</span><span style="color:#90A4AE;font-style:italic;"> #启动数据库实例</span></span>
<span class="line"><span style="color:#E2931D;">-w</span><span style="color:#90A4AE;font-style:italic;"> #等待启动完成</span></span>
<span class="line"><span style="color:#E2931D;">-t</span><span style="color:#90A4AE;font-style:italic;"> #等待启动完成的等待秒数，默认为60秒</span></span>
<span class="line"><span style="color:#E2931D;">-s</span><span style="color:#90A4AE;font-style:italic;"> #只打印错误和警告信息,不打印提示性信息</span></span>
<span class="line"><span style="color:#E2931D;">-D</span><span style="color:#91B859;"> datadir#指定数据库实例的数据目录</span></span>
<span class="line"><span style="color:#E2931D;">-l</span><span style="color:#90A4AE;font-style:italic;"> #服务器日志输出附加在“filename”文件上，如果该文件不存在则创建它</span></span>
<span class="line"><span style="color:#E2931D;">-o</span><span style="color:#91B859;"> options</span><span style="color:#90A4AE;font-style:italic;"> #声明要直接传递给postgres 的选项，具体可见postgres命令的帮助</span></span>
<span class="line"><span style="color:#E2931D;">-p</span><span style="color:#91B859;"> path</span><span style="color:#90A4AE;font-style:italic;"> #指定postgres可执行文件的位置。默认情况下postgres可执行文件来自和pg_ctl相同的目录，</span></span>
<span class="line"><span style="color:#E2931D;">不必使用该选项。除非要进行一些不同寻常的操作，或者产生了postgres执行文件找不到的错误</span></span>
<span class="line"><span style="color:#E2931D;">-c</span><span style="color:#90A4AE;font-style:italic;"> #提高服务器的软限制(ulimit -c)，尝试允许数据库实例在有异常时产生一个coredump文件,以便于问</span></span>
<span class="line"><span style="color:#E2931D;">题定位和故障分析</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>停止服务</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#停止服务</span></span>
<span class="line"><span style="color:#E2931D;">pg_ctl</span><span style="color:#91B859;"> stop</span><span style="color:#90A4AE;"> [-w] </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">-t seconds</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-s</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-D datadir</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-m s</span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">mart</span><span style="color:#39ADB5;">]</span><span style="color:#90A4AE;"> l f</span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">ast</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> |</span><span style="color:#90A4AE;"> i </span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">mmediate</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> ]</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#参数说明如下。</span></span>
<span class="line"><span style="color:#E2931D;">-W</span><span style="color:#90A4AE;font-style:italic;"> #不等待数据库停下来，命令就返回。</span></span>
<span class="line"><span style="color:#E2931D;">-m</span><span style="color:#90A4AE;font-style:italic;"> #指定停止的模式。前面已叙述过停止的几种模式了。</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#其它未说明的参数,其含义与启动数据库命令中的参数相同。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>加载配置</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#加载配置</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#修改配置文件 postgresql.conf后，让修改生效的方法有两种</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#方法一:在操作系统使用下面命令</span></span>
<span class="line"><span style="color:#E2931D;">pg_ctl</span><span style="color:#91B859;"> reload</span><span style="color:#90A4AE;"> [-s] </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">-D datadir</span><span style="color:#39ADB5;">]</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#方法二:在 psql 中使用如下命令</span></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> pg_reload_conf();</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#注意:加载配置操作只针对一些配置的修改生效,有些配置需要重新启动服务才能生效</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="pg-ctl-命令管理-postgresql" tabindex="-1">pg_ctl 命令管理 PostgreSQL <a class="header-anchor" href="#pg-ctl-命令管理-postgresql" aria-label="Permalink to &quot;pg_ctl 命令管理 PostgreSQL&quot;">​</a></h3><p>pg_ctl 是一个实用的命令行工具，有以下常见功能:</p><ul><li>初始化 PostgreSQL 数据库实例</li><li>启动、终止或重启 PostgreSQL 数据库服务。</li><li>查看 PostgreSQL数据库服务的状态</li><li>让数据库实例重新读取配置文件。允许给一个指定的PostgreSQL进程发送信号</li><li>控制 standby 服务器为可读写</li><li>在 Windows平台下允许为数据库实例注册或取消一个系统服务</li></ul><p><strong>pc_ctl 命令格式</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># psql --help</span></span>
<span class="line"><span style="color:#E2931D;">psql</span><span style="color:#91B859;"> is</span><span style="color:#91B859;"> the</span><span style="color:#91B859;"> PostgreSQL</span><span style="color:#91B859;"> interactive</span><span style="color:#91B859;"> terminal.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">Usage:</span></span>
<span class="line"><span style="color:#E2931D;">  psql</span><span style="color:#90A4AE;"> [OPTION]... </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">DBNAME </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">USERNAME</span><span style="color:#39ADB5;">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">General</span><span style="color:#91B859;"> options:</span></span>
<span class="line"><span style="color:#E2931D;">  -c,</span><span style="color:#91B859;"> --command=COMMAND</span><span style="color:#91B859;">    run</span><span style="color:#91B859;"> only</span><span style="color:#91B859;"> single</span><span style="color:#91B859;"> command</span><span style="color:#90A4AE;"> (SQL </span><span style="color:#91B859;">or</span><span style="color:#91B859;"> internal</span><span style="color:#90A4AE;">) and exit</span></span>
<span class="line"><span style="color:#E2931D;">  -d,</span><span style="color:#91B859;"> --dbname=DBNAME</span><span style="color:#91B859;">      database</span><span style="color:#91B859;"> name</span><span style="color:#91B859;"> to</span><span style="color:#91B859;"> connect</span><span style="color:#91B859;"> to</span><span style="color:#90A4AE;"> (default: </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">postgres</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">  -f,</span><span style="color:#91B859;"> --file=FILENAME</span><span style="color:#91B859;">      execute</span><span style="color:#91B859;"> commands</span><span style="color:#91B859;"> from</span><span style="color:#91B859;"> file,</span><span style="color:#91B859;"> then</span><span style="color:#91B859;"> exit</span></span>
<span class="line"><span style="color:#E2931D;">  -l,</span><span style="color:#91B859;"> --list</span><span style="color:#91B859;">               list</span><span style="color:#91B859;"> available</span><span style="color:#91B859;"> databases,</span><span style="color:#91B859;"> then</span><span style="color:#91B859;"> exit</span></span>
<span class="line"><span style="color:#E2931D;">  -v,</span><span style="color:#91B859;"> --set=,</span><span style="color:#91B859;"> --variable=NAME=VALUE</span></span>
<span class="line"><span style="color:#6182B8;">                           set</span><span style="color:#91B859;"> psql</span><span style="color:#91B859;"> variable</span><span style="color:#91B859;"> NAME</span><span style="color:#91B859;"> to</span><span style="color:#91B859;"> VALUE</span></span>
<span class="line"><span style="color:#39ADB5;">                           (</span><span style="color:#E2931D;">e.g.,</span><span style="color:#91B859;"> -v</span><span style="color:#91B859;"> ON_ERROR_STOP=</span><span style="color:#F76D47;">1</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#E2931D;">  -V,</span><span style="color:#91B859;"> --version</span><span style="color:#91B859;">            output</span><span style="color:#91B859;"> version</span><span style="color:#91B859;"> information,</span><span style="color:#91B859;"> then</span><span style="color:#91B859;"> exit</span></span>
<span class="line"><span style="color:#E2931D;">  -X,</span><span style="color:#91B859;"> --no-psqlrc</span><span style="color:#91B859;">          do</span><span style="color:#91B859;"> not</span><span style="color:#91B859;"> read</span><span style="color:#91B859;"> startup</span><span style="color:#91B859;"> file</span><span style="color:#90A4AE;"> (~/.psqlrc)</span></span>
<span class="line"><span style="color:#E2931D;">  -1</span><span style="color:#90A4AE;"> (</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">one</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">), --single-transaction</span></span>
<span class="line"><span style="color:#E2931D;">                           execute</span><span style="color:#91B859;"> as</span><span style="color:#91B859;"> a</span><span style="color:#91B859;"> single</span><span style="color:#91B859;"> transaction</span><span style="color:#90A4AE;"> (if </span><span style="color:#91B859;">non-interactive</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">  -?,</span><span style="color:#91B859;"> --help</span><span style="color:#39ADB5;">[=</span><span style="color:#91B859;">options</span><span style="color:#39ADB5;">]</span><span style="color:#91B859;">     show</span><span style="color:#91B859;"> this</span><span style="color:#91B859;"> help,</span><span style="color:#91B859;"> then</span><span style="color:#91B859;"> exit</span></span>
<span class="line"><span style="color:#90A4AE;">      --help</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">commands</span><span style="color:#E2931D;">      list</span><span style="color:#91B859;"> backslash</span><span style="color:#91B859;"> commands,</span><span style="color:#91B859;"> then</span><span style="color:#91B859;"> exit</span></span>
<span class="line"><span style="color:#90A4AE;">      --help</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">variables</span><span style="color:#E2931D;">     list</span><span style="color:#91B859;"> special</span><span style="color:#91B859;"> variables,</span><span style="color:#91B859;"> then</span><span style="color:#91B859;"> exit</span></span>
<span class="line"><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> pg_ctl</span><span style="color:#91B859;"> kill</span><span style="color:#91B859;">       SIGNALNAME</span><span style="color:#91B859;"> PID</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="初始化实例" tabindex="-1">初始化实例 <a class="header-anchor" href="#初始化实例" aria-label="Permalink to &quot;初始化实例&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#先切换用户</span></span>
<span class="line"><span style="color:#E2931D;">su</span><span style="color:#91B859;"> -</span><span style="color:#91B859;"> postgres</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#初始化数据库</span></span>
<span class="line"><span style="color:#E2931D;">initdb</span><span style="color:#90A4AE;"> [DATADIR]    </span></span>
<span class="line"><span style="color:#E2931D;">pg_ctl</span><span style="color:#91B859;"> init[db]</span><span style="color:#90A4AE;"> [-s] </span><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">-D DATADIR</span><span style="color:#39ADB5;">]</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;">-o options</span><span style="color:#39ADB5;">]</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#pg_ctl命令调用initdb命令创建了一个新的PostgreSQL 数据库实例,参数说明如下。</span></span>
<span class="line"><span style="color:#E2931D;">-s</span><span style="color:#90A4AE;font-style:italic;"> #只打印错误和警告信息，不打印提示性信息。</span></span>
<span class="line"><span style="color:#E2931D;">-D</span><span style="color:#91B859;"> DATADIR</span><span style="color:#90A4AE;font-style:italic;"> #指定数据库实例的数据目录。如果没有指定DATADIR,使用环境变量PGDATA指定的路径</span></span>
<span class="line"><span style="color:#E2931D;">-o</span><span style="color:#91B859;"> options</span><span style="color:#90A4AE;font-style:italic;"> #为直接传递给initdb命令的参数</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_4-实现pg远程连接。输入密码和无密码登陆" tabindex="-1">4. 实现pg远程连接。输入密码和无密码登陆 <a class="header-anchor" href="#_4-实现pg远程连接。输入密码和无密码登陆" aria-label="Permalink to &quot;4. 实现pg远程连接。输入密码和无密码登陆&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#主机添加远程认账权限</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># vim /pgsql/data/pg_hba.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">92</span><span style="color:#90A4AE;font-style:italic;"> # IPv6 local connections:</span></span>
<span class="line"><span style="color:#E2931D;"> 93</span><span style="color:#91B859;"> host</span><span style="color:#91B859;">    all</span><span style="color:#91B859;">             all</span><span style="color:#91B859;">             ::1/128</span><span style="color:#91B859;">                 trust</span></span>
<span class="line"><span style="color:#E2931D;"> 94</span><span style="color:#91B859;"> host</span><span style="color:#91B859;">    all</span><span style="color:#91B859;">             all</span><span style="color:#91B859;">              0.0.0.0/0</span><span style="color:#91B859;">              md5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#client连接</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">postgres@postgers </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;">$ apt -y install postgresql</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">postgres@postgers </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;">$ psql -h 192.168.188.88 postgres</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_5-总结库-模式-表的添加和删除操作。表数据的curd。同时总结相关信息查看语句" tabindex="-1">5. 总结库，模式，表的添加和删除操作。表数据的CURD。同时总结相关信息查看语句 <a class="header-anchor" href="#_5-总结库-模式-表的添加和删除操作。表数据的curd。同时总结相关信息查看语句" aria-label="Permalink to &quot;5. 总结库，模式，表的添加和删除操作。表数据的CURD。同时总结相关信息查看语句&quot;">​</a></h2><h3 id="库-模式-表的添加和删除操作" tabindex="-1">库，模式，表的添加和删除操作 <a class="header-anchor" href="#库-模式-表的添加和删除操作" aria-label="Permalink to &quot;库，模式，表的添加和删除操作&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#创建数据库</span></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create database testdb</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> DATABASE</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#切换数据库testdb</span></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \c testdb</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">You</span><span style="color:#91B859;"> are</span><span style="color:#91B859;"> now</span><span style="color:#91B859;"> connected</span><span style="color:#91B859;"> to</span><span style="color:#91B859;"> database</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">testdb</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> as</span><span style="color:#91B859;"> user</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">postgres</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#切换数据库</span></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \c testdb </span></span>
<span class="line"><span style="color:#E2931D;">You</span><span style="color:#91B859;"> are</span><span style="color:#91B859;"> now</span><span style="color:#91B859;"> connected</span><span style="color:#91B859;"> to</span><span style="color:#91B859;"> database</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">testdb</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> as</span><span style="color:#91B859;"> user</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">postgres</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#创建模式</span></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create schema schema_mage</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> SCHEMA</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看模式</span></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dn</span></span>
<span class="line"><span style="color:#E2931D;">    List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> schemas</span></span>
<span class="line"><span style="color:#E2931D;">    Name</span><span style="color:#39ADB5;">     |</span><span style="color:#E2931D;">  Owner</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">-------------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;">      |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> schema_mage</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">2</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#删除模式</span></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># drop schema schema_mage </span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">DROP</span><span style="color:#91B859;"> SCHEMA</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#创建表</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create table tb1(</span><span style="color:#E2931D;">id</span><span style="color:#91B859;"> serial</span><span style="color:#91B859;"> primary</span><span style="color:#91B859;"> key,name</span><span style="color:#91B859;"> text</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> TABLE</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#创建数据</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># insert into tb1(</span><span style="color:#E2931D;">name</span><span style="color:#90A4AE;">) </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> (md5(random()::text)) from generate_series (</span><span style="color:#E2931D;">2,10</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">INSERT</span><span style="color:#F76D47;"> 0</span><span style="color:#F76D47;"> 9</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create table tb2(</span><span style="color:#E2931D;">id</span><span style="color:#91B859;"> serial</span><span style="color:#91B859;"> primary</span><span style="color:#91B859;"> key,name</span><span style="color:#91B859;"> text</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> TABLE</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># insert into tb2(</span><span style="color:#E2931D;">name</span><span style="color:#90A4AE;">) </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> (md5(random()::text)) from generate_series (</span><span style="color:#E2931D;">2,10</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">INSERT</span><span style="color:#F76D47;"> 0</span><span style="color:#F76D47;"> 9</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看表内容</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb1</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;"> id</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">               name</span><span style="color:#90A4AE;">               </span></span>
<span class="line"><span style="color:#E2931D;">----+----------------------------------</span></span>
<span class="line"><span style="color:#E2931D;">  1</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> e63cf7cba0cc397de638ba1d1b9f51c2</span></span>
<span class="line"><span style="color:#E2931D;">  2</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> a7dd1dabb91657a68643633b92752777</span></span>
<span class="line"><span style="color:#E2931D;">  3</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> 84a74c6f735a14ffc6324a22e93e5913</span></span>
<span class="line"><span style="color:#E2931D;">  4</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> f8710e7a9fc245f567dccffe5b82a096</span></span>
<span class="line"><span style="color:#E2931D;">  5</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> c1ebc2581942618bbad6ec7f5131c95d</span></span>
<span class="line"><span style="color:#E2931D;">  6</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> 19d4fc4c81bbb679389c98eb5fc7c6c4</span></span>
<span class="line"><span style="color:#E2931D;">  7</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> fdcd6825e6e35ca0e218dc7da0f1f689</span></span>
<span class="line"><span style="color:#E2931D;">  8</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> eadeacd462dce74dc178ac23e90b0cef</span></span>
<span class="line"><span style="color:#E2931D;">  9</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> 9c9bc16fcf7b0967c70e91d76efccd5e</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">9</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#\dt相当与show tables；</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dt tb1</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">        List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> relations</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Name</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Type</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;">  Owner</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">--------+------+-------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb1</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">1</span><span style="color:#91B859;"> row</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#创建并复制表结构</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create table tb2 (</span><span style="color:#E2931D;">like</span><span style="color:#91B859;"> tb1</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> TABLE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#\dt查看表结构，相当于show tables</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dt tb2</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">        List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> relations</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Name</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Type</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;">  Owner</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">--------+------+-------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb2</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">1</span><span style="color:#91B859;"> row</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看tb2表内容</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb2</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;"> id</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> name</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">----+------</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">0</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看所有表信息</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dt</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb1</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb2</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#表详情</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dt+</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb1</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> permanent</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> heap</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> 16</span><span style="color:#91B859;"> kB</span><span style="color:#39ADB5;"> |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb2</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> permanent</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> heap</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> 16</span><span style="color:#91B859;"> kB</span><span style="color:#39ADB5;"> |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"> #查看表结构</span></span>
<span class="line"><span style="color:#90A4AE;"> testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \d tb1</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;"> id</span><span style="color:#39ADB5;">     |</span><span style="color:#E2931D;"> integer</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> not</span><span style="color:#91B859;"> null</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> nextval(</span><span style="color:#E2931D;">&#39;tb1_id_seq&#39;</span><span style="color:#6182B8;">:</span><span style="color:#91B859;">:regclass</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;"> name</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> text</span><span style="color:#39ADB5;">    |</span><span style="color:#39ADB5;">           |</span><span style="color:#39ADB5;">          |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看表id及对应文件</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from pg_stat_all_tables where relname</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">tb1</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">-[</span><span style="color:#91B859;"> RECORD</span><span style="color:#F76D47;"> 1</span><span style="color:#91B859;"> ]-------+-------</span></span>
<span class="line"><span style="color:#E2931D;">relid</span><span style="color:#39ADB5;">               |</span><span style="color:#E2931D;"> 16394</span></span>
<span class="line"><span style="color:#E2931D;">schemaname</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> public</span></span>
<span class="line"><span style="color:#E2931D;">relname</span><span style="color:#39ADB5;">             |</span><span style="color:#E2931D;"> tb1</span></span>
<span class="line"><span style="color:#E2931D;">seq_scan</span><span style="color:#39ADB5;">            |</span><span style="color:#E2931D;"> 2</span></span>
<span class="line"><span style="color:#E2931D;">seq_tup_read</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">idx_scan</span><span style="color:#39ADB5;">            |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">idx_tup_fetch</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_ins</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_upd</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_del</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_hot_upd</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_live_tup</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">n_dead_tup</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_mod_since_analyze</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">n_ins_since_vacuum</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">last_vacuum</span><span style="color:#39ADB5;">         |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_autovacuum</span><span style="color:#39ADB5;">     |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_analyze</span><span style="color:#39ADB5;">        |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_autoanalyze</span><span style="color:#39ADB5;">    |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">vacuum_count</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">autovacuum_count</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">analyze_count</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">autoanalyze_count</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># drop table tb1</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">DROP</span><span style="color:#91B859;"> TABLE</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from pg_stat_all_tables where relname</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">tb1</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">0</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@postgers 16392</span><span style="color:#39ADB5;">]</span><span style="color:#90A4AE;"># ls</span></span>
<span class="line"><span style="color:#E2931D;">112</span><span style="color:#F76D47;">        13583</span><span style="color:#F76D47;">      16393</span><span style="color:#F76D47;">  2579</span><span style="color:#91B859;">      2606_fsm</span><span style="color:#F76D47;">  2613</span><span style="color:#F76D47;">      2651</span><span style="color:#F76D47;">  2669</span><span style="color:#F76D47;">      2689</span><span style="color:#F76D47;">      2830</span><span style="color:#F76D47;">      2995</span><span style="color:#F76D47;">      3381</span><span style="color:#F76D47;">      3501</span><span style="color:#F76D47;">      3601</span><span style="color:#91B859;">      3764_vm</span><span style="color:#F76D47;">  4157</span><span style="color:#F76D47;">  549</span></span>
<span class="line"><span style="color:#E2931D;">113</span><span style="color:#F76D47;">        13584</span><span style="color:#F76D47;">      16394</span><span style="color:#F76D47;">  2600</span><span style="color:#91B859;">      2606_vm</span><span style="color:#F76D47;">   2615</span><span style="color:#F76D47;">      2652</span><span style="color:#F76D47;">  2670</span><span style="color:#F76D47;">      2690</span><span style="color:#F76D47;">      2831</span><span style="color:#F76D47;">      2996</span><span style="color:#F76D47;">      3394</span><span style="color:#F76D47;">      3502</span><span style="color:#91B859;">      3601_fsm</span><span style="color:#F76D47;">  3766</span><span style="color:#F76D47;">     4158</span><span style="color:#F76D47;">  6102</span></span>
<span class="line"><span style="color:#E2931D;">1247</span><span style="color:#91B859;">       13584_fsm</span><span style="color:#F76D47;">  16398</span><span style="color:#91B859;">  2600_fsm</span><span style="color:#F76D47;">  2607</span><span style="color:#91B859;">      2615_fsm</span><span style="color:#F76D47;">  2653</span><span style="color:#F76D47;">  2673</span><span style="color:#F76D47;">      2691</span><span style="color:#F76D47;">      2832</span><span style="color:#F76D47;">      3079</span><span style="color:#91B859;">      3394_fsm</span><span style="color:#F76D47;">  3503</span><span style="color:#91B859;">      3601_vm</span><span style="color:#F76D47;">   3767</span><span style="color:#F76D47;">     4159</span><span style="color:#F76D47;">  6104</span></span>
<span class="line"><span style="color:#E2931D;">1247_fsm</span><span style="color:#91B859;">   13584_vm</span><span style="color:#F76D47;">   16399</span><span style="color:#91B859;">  2600_vm</span><span style="color:#91B859;">   2607_fsm</span><span style="color:#91B859;">  2615_vm</span><span style="color:#F76D47;">   2654</span><span style="color:#91B859;">  2673_fsm</span><span style="color:#F76D47;">  2692</span><span style="color:#F76D47;">      2833</span><span style="color:#91B859;">      3079_fsm</span><span style="color:#91B859;">  3394_vm</span><span style="color:#F76D47;">   3534</span><span style="color:#F76D47;">      3602</span><span style="color:#F76D47;">      3997</span><span style="color:#F76D47;">     4160</span><span style="color:#F76D47;">  6106</span></span>
<span class="line"><span style="color:#E2931D;">1247_vm</span><span style="color:#F76D47;">    13587</span><span style="color:#F76D47;">      16400</span><span style="color:#F76D47;">  2601</span><span style="color:#91B859;">      2607_vm</span><span style="color:#F76D47;">   2616</span><span style="color:#F76D47;">      2655</span><span style="color:#F76D47;">  2674</span><span style="color:#F76D47;">      2693</span><span style="color:#F76D47;">      2834</span><span style="color:#91B859;">      3079_vm</span><span style="color:#F76D47;">   3395</span><span style="color:#F76D47;">      3541</span><span style="color:#91B859;">      3602_fsm</span><span style="color:#F76D47;">  4143</span><span style="color:#F76D47;">     4163</span><span style="color:#F76D47;">  6110</span></span>
<span class="line"><span style="color:#E2931D;">1249</span><span style="color:#F76D47;">       13588</span><span style="color:#F76D47;">      16402</span><span style="color:#91B859;">  2601_fsm</span><span style="color:#F76D47;">  2608</span><span style="color:#91B859;">      2616_fsm</span><span style="color:#F76D47;">  2656</span><span style="color:#91B859;">  2674_fsm</span><span style="color:#F76D47;">  2696</span><span style="color:#F76D47;">      2835</span><span style="color:#F76D47;">      3080</span><span style="color:#F76D47;">      3429</span><span style="color:#91B859;">      3541_fsm</span><span style="color:#91B859;">  3602_vm</span><span style="color:#F76D47;">   4144</span><span style="color:#F76D47;">     4164</span><span style="color:#F76D47;">  6111</span></span>
<span class="line"><span style="color:#E2931D;">1249_fsm</span><span style="color:#F76D47;">   13589</span><span style="color:#F76D47;">      16403</span><span style="color:#91B859;">  2601_vm</span><span style="color:#91B859;">   2608_fsm</span><span style="color:#91B859;">  2616_vm</span><span style="color:#F76D47;">   2657</span><span style="color:#F76D47;">  2675</span><span style="color:#F76D47;">      2699</span><span style="color:#F76D47;">      2836</span><span style="color:#F76D47;">      3081</span><span style="color:#F76D47;">      3430</span><span style="color:#91B859;">      3541_vm</span><span style="color:#F76D47;">   3603</span><span style="color:#F76D47;">      4145</span><span style="color:#F76D47;">     4165</span><span style="color:#F76D47;">  6112</span></span>
<span class="line"><span style="color:#E2931D;">1249_vm</span><span style="color:#91B859;">    13589_fsm</span><span style="color:#F76D47;">  16407</span><span style="color:#F76D47;">  2602</span><span style="color:#91B859;">      2608_vm</span><span style="color:#F76D47;">   2617</span><span style="color:#F76D47;">      2658</span><span style="color:#F76D47;">  2678</span><span style="color:#F76D47;">      2701</span><span style="color:#91B859;">      2836_fsm</span><span style="color:#F76D47;">  3085</span><span style="color:#F76D47;">      3431</span><span style="color:#F76D47;">      3542</span><span style="color:#91B859;">      3603_fsm</span><span style="color:#F76D47;">  4146</span><span style="color:#F76D47;">     4166</span><span style="color:#F76D47;">  6113</span></span>
<span class="line"><span style="color:#E2931D;">1255</span><span style="color:#91B859;">       13589_vm</span><span style="color:#F76D47;">   16408</span><span style="color:#91B859;">  2602_fsm</span><span style="color:#F76D47;">  2609</span><span style="color:#91B859;">      2617_fsm</span><span style="color:#F76D47;">  2659</span><span style="color:#F76D47;">  2679</span><span style="color:#F76D47;">      2702</span><span style="color:#91B859;">      2836_vm</span><span style="color:#F76D47;">   3118</span><span style="color:#F76D47;">      3433</span><span style="color:#F76D47;">      3574</span><span style="color:#91B859;">      3603_vm</span><span style="color:#F76D47;">   4147</span><span style="color:#F76D47;">     4167</span><span style="color:#F76D47;">  6117</span></span>
<span class="line"><span style="color:#E2931D;">1255_fsm</span><span style="color:#F76D47;">   13592</span><span style="color:#F76D47;">      16409</span><span style="color:#91B859;">  2602_vm</span><span style="color:#91B859;">   2609_fsm</span><span style="color:#91B859;">  2617_vm</span><span style="color:#F76D47;">   2660</span><span style="color:#F76D47;">  2680</span><span style="color:#F76D47;">      2703</span><span style="color:#F76D47;">      2837</span><span style="color:#F76D47;">      3119</span><span style="color:#F76D47;">      3439</span><span style="color:#F76D47;">      3575</span><span style="color:#F76D47;">      3604</span><span style="color:#F76D47;">      4148</span><span style="color:#F76D47;">     4168</span><span style="color:#F76D47;">  6175</span></span>
<span class="line"><span style="color:#E2931D;">1255_vm</span><span style="color:#F76D47;">    13593</span><span style="color:#F76D47;">      174</span><span style="color:#F76D47;">    2603</span><span style="color:#91B859;">      2609_vm</span><span style="color:#F76D47;">   2618</span><span style="color:#F76D47;">      2661</span><span style="color:#F76D47;">  2681</span><span style="color:#F76D47;">      2704</span><span style="color:#F76D47;">      2838</span><span style="color:#F76D47;">      3164</span><span style="color:#F76D47;">      3440</span><span style="color:#F76D47;">      3576</span><span style="color:#F76D47;">      3605</span><span style="color:#F76D47;">      4149</span><span style="color:#F76D47;">     4169</span><span style="color:#F76D47;">  6176</span></span>
<span class="line"><span style="color:#E2931D;">1259</span><span style="color:#F76D47;">       13594</span><span style="color:#F76D47;">      175</span><span style="color:#91B859;">    2603_fsm</span><span style="color:#F76D47;">  2610</span><span style="color:#91B859;">      2618_fsm</span><span style="color:#F76D47;">  2662</span><span style="color:#F76D47;">  2682</span><span style="color:#F76D47;">      2753</span><span style="color:#91B859;">      2838_fsm</span><span style="color:#F76D47;">  3256</span><span style="color:#F76D47;">      3455</span><span style="color:#F76D47;">      3596</span><span style="color:#F76D47;">      3606</span><span style="color:#F76D47;">      4150</span><span style="color:#F76D47;">     4170</span><span style="color:#F76D47;">  826</span></span>
<span class="line"><span style="color:#E2931D;">1259_fsm</span><span style="color:#91B859;">   13594_fsm</span><span style="color:#F76D47;">  2187</span><span style="color:#91B859;">   2603_vm</span><span style="color:#91B859;">   2610_fsm</span><span style="color:#91B859;">  2618_vm</span><span style="color:#F76D47;">   2663</span><span style="color:#F76D47;">  2683</span><span style="color:#91B859;">      2753_fsm</span><span style="color:#91B859;">  2838_vm</span><span style="color:#F76D47;">   3257</span><span style="color:#F76D47;">      3456</span><span style="color:#F76D47;">      3597</span><span style="color:#F76D47;">      3607</span><span style="color:#F76D47;">      4151</span><span style="color:#F76D47;">     4171</span><span style="color:#F76D47;">  827</span></span>
<span class="line"><span style="color:#E2931D;">1259_vm</span><span style="color:#91B859;">    13594_vm</span><span style="color:#F76D47;">   2224</span><span style="color:#F76D47;">   2604</span><span style="color:#91B859;">      2610_vm</span><span style="color:#F76D47;">   2619</span><span style="color:#F76D47;">      2664</span><span style="color:#F76D47;">  2684</span><span style="color:#91B859;">      2753_vm</span><span style="color:#F76D47;">   2839</span><span style="color:#F76D47;">      3258</span><span style="color:#91B859;">      3456_fsm</span><span style="color:#F76D47;">  3598</span><span style="color:#F76D47;">      3608</span><span style="color:#F76D47;">      4152</span><span style="color:#F76D47;">     4172</span><span style="color:#F76D47;">  828</span></span>
<span class="line"><span style="color:#E2931D;">13579</span><span style="color:#F76D47;">      13597</span><span style="color:#F76D47;">      2228</span><span style="color:#F76D47;">   2605</span><span style="color:#F76D47;">      2611</span><span style="color:#91B859;">      2619_fsm</span><span style="color:#F76D47;">  2665</span><span style="color:#F76D47;">  2685</span><span style="color:#F76D47;">      2754</span><span style="color:#F76D47;">      2840</span><span style="color:#F76D47;">      3350</span><span style="color:#91B859;">      3456_vm</span><span style="color:#F76D47;">   3599</span><span style="color:#F76D47;">      3609</span><span style="color:#F76D47;">      4153</span><span style="color:#F76D47;">     4173</span><span style="color:#91B859;">  pg_filenode.map</span></span>
<span class="line"><span style="color:#E2931D;">13579_fsm</span><span style="color:#F76D47;">  13598</span><span style="color:#F76D47;">      2328</span><span style="color:#91B859;">   2605_fsm</span><span style="color:#F76D47;">  2612</span><span style="color:#91B859;">      2619_vm</span><span style="color:#F76D47;">   2666</span><span style="color:#F76D47;">  2686</span><span style="color:#F76D47;">      2755</span><span style="color:#91B859;">      2840_fsm</span><span style="color:#F76D47;">  3351</span><span style="color:#F76D47;">      3466</span><span style="color:#F76D47;">      3600</span><span style="color:#F76D47;">      3712</span><span style="color:#F76D47;">      4154</span><span style="color:#F76D47;">     4174</span><span style="color:#91B859;">  pg_internal.init</span></span>
<span class="line"><span style="color:#E2931D;">13579_vm</span><span style="color:#F76D47;">   1417</span><span style="color:#F76D47;">       2336</span><span style="color:#91B859;">   2605_vm</span><span style="color:#91B859;">   2612_fsm</span><span style="color:#F76D47;">  2620</span><span style="color:#F76D47;">      2667</span><span style="color:#F76D47;">  2687</span><span style="color:#F76D47;">      2756</span><span style="color:#91B859;">      2840_vm</span><span style="color:#F76D47;">   3379</span><span style="color:#F76D47;">      3467</span><span style="color:#91B859;">      3600_fsm</span><span style="color:#F76D47;">  3764</span><span style="color:#F76D47;">      4155</span><span style="color:#F76D47;">     5002</span><span style="color:#91B859;">  PG_VERSION</span></span>
<span class="line"><span style="color:#E2931D;">13582</span><span style="color:#F76D47;">      1418</span><span style="color:#F76D47;">       2337</span><span style="color:#F76D47;">   2606</span><span style="color:#91B859;">      2612_vm</span><span style="color:#F76D47;">   2650</span><span style="color:#F76D47;">      2668</span><span style="color:#F76D47;">  2688</span><span style="color:#F76D47;">      2757</span><span style="color:#F76D47;">      2841</span><span style="color:#F76D47;">      3380</span><span style="color:#F76D47;">      3468</span><span style="color:#91B859;">      3600_vm</span><span style="color:#91B859;">   3764_fsm</span><span style="color:#F76D47;">  4156</span><span style="color:#F76D47;">     548</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#确认磁盘文件是否存在</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@postgers 16392</span><span style="color:#39ADB5;">]</span><span style="color:#90A4AE;"># find -name 16394</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#以列展示，相当与 /G；</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \x</span></span>
<span class="line"><span style="color:#E2931D;">Expanded</span><span style="color:#91B859;"> display</span><span style="color:#91B859;"> is</span><span style="color:#91B859;"> on.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看指定表对应的文件</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from pg_relation_filepath(</span><span style="color:#E2931D;">&#39;tb2&#39;</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">-[</span><span style="color:#91B859;"> RECORD</span><span style="color:#F76D47;"> 1</span><span style="color:#91B859;"> ]--------+-----------------</span></span>
<span class="line"><span style="color:#E2931D;">pg_relation_filepath</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> base/16392/16403</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看当前库所有表的统计信息</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@postgers </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># su - postgres </span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">postgres@postgers </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;">$ psql</span></span>
<span class="line"><span style="color:#E2931D;">psql</span><span style="color:#90A4AE;"> (14.8 (Ubuntu </span><span style="color:#91B859;">14.8-0ubuntu0.22.04.1</span><span style="color:#90A4AE;">))</span></span>
<span class="line"><span style="color:#E2931D;">Type</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">help</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> for</span><span style="color:#91B859;"> help.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \l</span></span>
<span class="line"><span style="color:#E2931D;">                                  List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> databases</span></span>
<span class="line"><span style="color:#E2931D;">   Name</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;">  Owner</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> Encoding</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">   Collate</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;">    Ctype</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;">   Access</span><span style="color:#91B859;"> privileges</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">-----------+----------+----------+-------------+-------------+-----------------------</span></span>
<span class="line"><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> UTF8</span><span style="color:#39ADB5;">     |</span><span style="color:#E2931D;"> en_US.UTF-8</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> en_US.UTF-8</span><span style="color:#39ADB5;"> |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> template0</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> UTF8</span><span style="color:#39ADB5;">     |</span><span style="color:#E2931D;"> en_US.UTF-8</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> en_US.UTF-8</span><span style="color:#39ADB5;"> |</span><span style="color:#91B859;"> =c/postgres</span><span style="color:#91B859;">          +</span></span>
<span class="line"><span style="color:#39ADB5;">           |</span><span style="color:#39ADB5;">          |</span><span style="color:#39ADB5;">          |</span><span style="color:#39ADB5;">             |</span><span style="color:#39ADB5;">             |</span><span style="color:#90A4AE;"> postgres</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">CTc/postgres</span></span>
<span class="line"><span style="color:#E2931D;"> template1</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> UTF8</span><span style="color:#39ADB5;">     |</span><span style="color:#E2931D;"> en_US.UTF-8</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> en_US.UTF-8</span><span style="color:#39ADB5;"> |</span><span style="color:#91B859;"> =c/postgres</span><span style="color:#91B859;">          +</span></span>
<span class="line"><span style="color:#39ADB5;">           |</span><span style="color:#39ADB5;">          |</span><span style="color:#39ADB5;">          |</span><span style="color:#39ADB5;">             |</span><span style="color:#39ADB5;">             |</span><span style="color:#90A4AE;"> postgres</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">CTc/postgres</span></span>
<span class="line"><span style="color:#E2931D;"> testdb</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> UTF8</span><span style="color:#39ADB5;">     |</span><span style="color:#E2931D;"> en_US.UTF-8</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> en_US.UTF-8</span><span style="color:#39ADB5;"> |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">4</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">Did</span><span style="color:#91B859;"> not</span><span style="color:#91B859;"> find</span><span style="color:#91B859;"> any</span><span style="color:#91B859;"> relations.</span></span>
<span class="line"><span style="color:#90A4AE;">postgres</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \c testdb </span></span>
<span class="line"><span style="color:#E2931D;">You</span><span style="color:#91B859;"> are</span><span style="color:#91B859;"> now</span><span style="color:#91B859;"> connected</span><span style="color:#91B859;"> to</span><span style="color:#91B859;"> database</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">testdb</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> as</span><span style="color:#91B859;"> user</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">postgres</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">.</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dt</span></span>
<span class="line"><span style="color:#E2931D;">        List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> relations</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Name</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Type</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;">  Owner</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">--------+------+-------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb1</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb2</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">2</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from pg_stat_all_tables where relname</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">tb1</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \x</span></span>
<span class="line"><span style="color:#E2931D;">Expanded</span><span style="color:#91B859;"> display</span><span style="color:#91B859;"> is</span><span style="color:#91B859;"> on.</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from pg_stat_all_tables where relname</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">tb1</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">-[</span><span style="color:#91B859;"> RECORD</span><span style="color:#F76D47;"> 1</span><span style="color:#91B859;"> ]-------+-------</span></span>
<span class="line"><span style="color:#E2931D;">relid</span><span style="color:#39ADB5;">               |</span><span style="color:#E2931D;"> 16413</span></span>
<span class="line"><span style="color:#E2931D;">schemaname</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> public</span></span>
<span class="line"><span style="color:#E2931D;">relname</span><span style="color:#39ADB5;">             |</span><span style="color:#E2931D;"> tb1</span></span>
<span class="line"><span style="color:#E2931D;">seq_scan</span><span style="color:#39ADB5;">            |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">seq_tup_read</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">idx_scan</span><span style="color:#39ADB5;">            |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">idx_tup_fetch</span><span style="color:#39ADB5;">       |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">n_tup_ins</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 1</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_upd</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_del</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_hot_upd</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_live_tup</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> 1</span></span>
<span class="line"><span style="color:#E2931D;">n_dead_tup</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_mod_since_analyze</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> 1</span></span>
<span class="line"><span style="color:#E2931D;">n_ins_since_vacuum</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> 1</span></span>
<span class="line"><span style="color:#E2931D;">last_vacuum</span><span style="color:#39ADB5;">         |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_autovacuum</span><span style="color:#39ADB5;">     |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_analyze</span><span style="color:#39ADB5;">        |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_autoanalyze</span><span style="color:#39ADB5;">    |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">vacuum_count</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">autovacuum_count</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">analyze_count</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">autoanalyze_count</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from pg_stat_all_tables where relname</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">tb2</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">-[</span><span style="color:#91B859;"> RECORD</span><span style="color:#F76D47;"> 1</span><span style="color:#91B859;"> ]-------+-------</span></span>
<span class="line"><span style="color:#E2931D;">relid</span><span style="color:#39ADB5;">               |</span><span style="color:#E2931D;"> 16403</span></span>
<span class="line"><span style="color:#E2931D;">schemaname</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> public</span></span>
<span class="line"><span style="color:#E2931D;">relname</span><span style="color:#39ADB5;">             |</span><span style="color:#E2931D;"> tb2</span></span>
<span class="line"><span style="color:#E2931D;">seq_scan</span><span style="color:#39ADB5;">            |</span><span style="color:#E2931D;"> 1</span></span>
<span class="line"><span style="color:#E2931D;">seq_tup_read</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">idx_scan</span><span style="color:#39ADB5;">            |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">idx_tup_fetch</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_ins</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_upd</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_del</span><span style="color:#39ADB5;">           |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_tup_hot_upd</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_live_tup</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">n_dead_tup</span><span style="color:#39ADB5;">          |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">n_mod_since_analyze</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">n_ins_since_vacuum</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> 9</span></span>
<span class="line"><span style="color:#E2931D;">last_vacuum</span><span style="color:#39ADB5;">         |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_autovacuum</span><span style="color:#39ADB5;">     |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_analyze</span><span style="color:#39ADB5;">        |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">last_autoanalyze</span><span style="color:#39ADB5;">    |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">vacuum_count</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">autovacuum_count</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">analyze_count</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"><span style="color:#E2931D;">autoanalyze_count</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看表relid</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> relid from pg_stat_all_tables where relname</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">tb1</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">-[</span><span style="color:#91B859;"> RECORD</span><span style="color:#F76D47;"> 1</span><span style="color:#91B859;"> ]</span></span>
<span class="line"><span style="color:#E2931D;">relid</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> 16413</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> relid from pg_stat_all_tables where relname</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">tb2</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">-[</span><span style="color:#91B859;"> RECORD</span><span style="color:#F76D47;"> 1</span><span style="color:#91B859;"> ]</span></span>
<span class="line"><span style="color:#E2931D;">relid</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> 16403</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看数据库的名</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> oid,datname from pg_database where datname</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">testdb</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">-[</span><span style="color:#91B859;"> RECORD</span><span style="color:#F76D47;"> 1</span><span style="color:#91B859;"> ]---</span></span>
<span class="line"><span style="color:#E2931D;">oid</span><span style="color:#39ADB5;">     |</span><span style="color:#E2931D;"> 16392</span></span>
<span class="line"><span style="color:#E2931D;">datname</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> testdb</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#对应磁盘文件</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@postgers </span><span style="color:#39ADB5;">]</span><span style="color:#90A4AE;"># ls /var/lib/postgresql/14/main/base/</span></span>
<span class="line"><span style="color:#E2931D;">1</span><span style="color:#F76D47;">  13760</span><span style="color:#F76D47;">  13761</span><span style="color:#F76D47;">  16392</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br></div></div><h3 id="表数据的curd" tabindex="-1">表数据的CURD <a class="header-anchor" href="#表数据的curd" aria-label="Permalink to &quot;表数据的CURD&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看数据类型</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> typname from pg_type</span><span style="color:#39ADB5;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">                typname</span><span style="color:#90A4AE;">                 </span></span>
<span class="line"><span style="color:#E2931D;">----------------------------------------</span></span>
<span class="line"><span style="color:#E2931D;"> bool</span></span>
<span class="line"><span style="color:#E2931D;"> bytea</span></span>
<span class="line"><span style="color:#E2931D;"> char</span></span>
<span class="line"><span style="color:#E2931D;"> name</span></span>
<span class="line"><span style="color:#E2931D;"> int8</span></span>
<span class="line"><span style="color:#E2931D;"> int2</span></span>
<span class="line"><span style="color:#E2931D;"> int2vector</span></span>
<span class="line"><span style="color:#E2931D;"> int4</span></span>
<span class="line"><span style="color:#E2931D;"> regproc</span></span>
<span class="line"><span style="color:#E2931D;"> text</span></span>
<span class="line"><span style="color:#E2931D;"> oid</span></span>
<span class="line"><span style="color:#E2931D;"> tid</span></span>
<span class="line"><span style="color:#E2931D;"> xid</span></span>
<span class="line"><span style="color:#E2931D;"> cid</span></span>
<span class="line"><span style="color:#E2931D;"> oidvector</span></span>
<span class="line"><span style="color:#E2931D;"> pg_type</span></span>
<span class="line"><span style="color:#E2931D;"> pg_attribute</span></span>
<span class="line"><span style="color:#E2931D;"> pg_proc</span></span>
<span class="line"><span style="color:#E2931D;"> pg_class</span></span>
<span class="line"><span style="color:#E2931D;"> json</span></span>
<span class="line"><span style="color:#E2931D;"> xml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">实例：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create table tb3(</span><span style="color:#E2931D;">id</span><span style="color:#91B859;"> serial,name</span><span style="color:#91B859;"> varchar</span><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">10</span><span style="color:#39ADB5;">)</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> TABLE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \d</span></span>
<span class="line"><span style="color:#E2931D;">             List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> relations</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">    Name</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;">   Type</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;">  Owner</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">--------+------------+----------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb1</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb1_id_seq</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> sequence</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb2</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb2_id_seq</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> sequence</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb3</span><span style="color:#39ADB5;">        |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;">    |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb3_id_seq</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> sequence</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">6</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">查看当前数据库中所以表，相当于show</span><span style="color:#91B859;"> tables；</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dt</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">        List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> relations</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Name</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Type</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;">  Owner</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">--------+------+-------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb1</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb2</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb3</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">3</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看tb3表结构，相当于desc tb3；</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dt tb3</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">        List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> relations</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Name</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Type</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;">  Owner</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">--------+------+-------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tb3</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">1</span><span style="color:#91B859;"> row</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#插入数据</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># insert into tb3 (</span><span style="color:#E2931D;">name</span><span style="color:#90A4AE;">)values(</span><span style="color:#E2931D;">&#39;ding&#39;</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">INSERT</span><span style="color:#F76D47;"> 0</span><span style="color:#F76D47;"> 1</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># insert into tb3 (</span><span style="color:#E2931D;">name</span><span style="color:#90A4AE;">)values(</span><span style="color:#E2931D;">&#39;bao&#39;</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">INSERT</span><span style="color:#F76D47;"> 0</span><span style="color:#F76D47;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb3</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;"> id</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> name</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">----+------</span></span>
<span class="line"><span style="color:#E2931D;">  1</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> shi</span></span>
<span class="line"><span style="color:#E2931D;">  2</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> bao</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">2</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#update一条数据</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># update tb3 set name</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">shi</span><span style="color:#39ADB5;">&#39;</span><span style="color:#E2931D;"> where</span><span style="color:#91B859;"> id=</span><span style="color:#F76D47;">1</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">UPDATE</span><span style="color:#F76D47;"> 1</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># update tb3 set name</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">hang</span><span style="color:#39ADB5;">&#39;</span><span style="color:#E2931D;"> where</span><span style="color:#91B859;"> id=</span><span style="color:#F76D47;">2</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">UPDATE</span><span style="color:#F76D47;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb3</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;"> id</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> name</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">----+------</span></span>
<span class="line"><span style="color:#E2931D;">  1</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> shi</span></span>
<span class="line"><span style="color:#E2931D;">  2</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> hang</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">2</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#delete表数据</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># delete from tb3 where id</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">3</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">DELETE</span><span style="color:#F76D47;"> 1</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb3</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;"> id</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> name</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">----+------</span></span>
<span class="line"><span style="color:#E2931D;">  1</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> shi</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">1</span><span style="color:#91B859;"> row</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#清空表</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># truncate table tb3</span><span style="color:#39ADB5;">;</span><span style="color:#E2931D;">  //table可省略truncate</span><span style="color:#91B859;"> tb3</span><span style="color:#91B859;"> ，与mysql不同点</span></span>
<span class="line"><span style="color:#E2931D;">TRUNCATE</span><span style="color:#91B859;"> TABLE</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb3</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;"> id</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> name</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">----+------</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">0</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">实例：</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> generate_series(3,6);</span></span>
<span class="line"><span style="color:#E2931D;"> generate_series</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">-----------------</span></span>
<span class="line"><span style="color:#E2931D;">               3</span></span>
<span class="line"><span style="color:#E2931D;">               4</span></span>
<span class="line"><span style="color:#E2931D;">               5</span></span>
<span class="line"><span style="color:#E2931D;">               6</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">4</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#插入100000条记录时间3758.300 ms</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create table tb3(</span><span style="color:#E2931D;">id</span><span style="color:#91B859;"> serial</span><span style="color:#91B859;"> primary</span><span style="color:#91B859;"> key,name</span><span style="color:#91B859;"> text</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> TABLE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># insert into tb3(</span><span style="color:#E2931D;">name</span><span style="color:#90A4AE;">) </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> (md5(random()::text)) from generate_series (</span><span style="color:#E2931D;">1,1000000</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">INSERT</span><span style="color:#F76D47;"> 0</span><span style="color:#F76D47;"> 1000000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \timing on</span></span>
<span class="line"><span style="color:#E2931D;">Timing</span><span style="color:#91B859;"> is</span><span style="color:#91B859;"> on.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># insert into tb3(</span><span style="color:#E2931D;">name</span><span style="color:#90A4AE;">) </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> (md5(random()::text)) from generate_series (</span><span style="color:#E2931D;">1,1000000</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">INSERT</span><span style="color:#F76D47;"> 0</span><span style="color:#F76D47;"> 1000000</span></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 3758.300</span><span style="color:#91B859;"> ms</span><span style="color:#90A4AE;"> (00:03.758)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br></div></div><h3 id="索引管理" tabindex="-1">索引管理 <a class="header-anchor" href="#索引管理" aria-label="Permalink to &quot;索引管理&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#创建表</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create table tb1(</span><span style="color:#E2931D;">id</span><span style="color:#91B859;"> int,info</span><span style="color:#91B859;"> text,crt_time</span><span style="color:#91B859;"> timestamp</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> TABLE</span></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 8.054</span><span style="color:#91B859;"> ms</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#插入数据</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># insert into tb1 </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> generate_series (</span><span style="color:#E2931D;">1,1000000</span><span style="color:#90A4AE;">),(</span><span style="color:#E2931D;">md5(random(</span><span style="color:#90A4AE;">)::text)),clock_timestamp();</span></span>
<span class="line"><span style="color:#E2931D;">INSERT</span><span style="color:#F76D47;"> 0</span><span style="color:#F76D47;"> 1000000</span></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 1968.414</span><span style="color:#91B859;"> ms</span><span style="color:#90A4AE;"> (00:01.968)</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># selc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看表内容</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb1</span><span style="color:#39ADB5;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#创建索引</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># create index  idx_tb1 on tb1(</span><span style="color:#E2931D;">id</span><span style="color:#90A4AE;">)</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">CREATE</span><span style="color:#91B859;"> INDEX</span></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 282.265</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \d tb1</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">                           Table</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">public.tb1</span><span style="color:#39ADB5;">&quot;</span></span>
<span class="line"><span style="color:#E2931D;">  Column</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;">            Type</span><span style="color:#39ADB5;">             |</span><span style="color:#E2931D;"> Collation</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Nullable</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Default</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">----------+-----------------------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#E2931D;"> id</span><span style="color:#39ADB5;">       |</span><span style="color:#E2931D;"> integer</span><span style="color:#39ADB5;">                     |</span><span style="color:#39ADB5;">           |</span><span style="color:#39ADB5;">          |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> info</span><span style="color:#39ADB5;">     |</span><span style="color:#E2931D;"> text</span><span style="color:#39ADB5;">                        |</span><span style="color:#39ADB5;">           |</span><span style="color:#39ADB5;">          |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> crt_time</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> timestamp</span><span style="color:#91B859;"> without</span><span style="color:#91B859;"> time</span><span style="color:#91B859;"> zone</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">           |</span><span style="color:#39ADB5;">          |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">Indexes:</span></span>
<span class="line"><span style="color:#E2931D;">    &quot;idx_tb1&quot;</span><span style="color:#91B859;"> btree</span><span style="color:#90A4AE;"> (id)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查询条件是否为索引列</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># explain analyze </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb1 where id</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">9999</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">                                                  QUERY</span><span style="color:#91B859;"> PLAN</span><span style="color:#90A4AE;">                                                  </span></span>
<span class="line"><span style="color:#E2931D;">--------------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#E2931D;"> Index</span><span style="color:#91B859;"> Scan</span><span style="color:#91B859;"> using</span><span style="color:#91B859;"> idx_tb1</span><span style="color:#91B859;"> on</span><span style="color:#91B859;"> tb1</span><span style="color:#90A4AE;">  (cost=0.42..8.44 </span><span style="color:#91B859;">rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> width=</span><span style="color:#F76D47;">45</span><span style="color:#90A4AE;">) (</span><span style="color:#E2931D;">actual</span><span style="color:#91B859;"> time=0.034..0.035</span><span style="color:#91B859;"> rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> loops=</span><span style="color:#F76D47;">1</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">   Index</span><span style="color:#91B859;"> Cond:</span><span style="color:#90A4AE;"> (id </span><span style="color:#91B859;">=</span><span style="color:#F76D47;"> 9999</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;"> Planning</span><span style="color:#91B859;"> Time:</span><span style="color:#F76D47;"> 0.173</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#E2931D;"> Execution</span><span style="color:#91B859;"> Time:</span><span style="color:#F76D47;"> 0.048</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">4</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 0.874</span><span style="color:#91B859;"> ms</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#全盘扫描</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># explain analyze </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb1 where info</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">ab0a99c8c702141d4ea40e3fd8e5777e</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">                                                    QUERY</span><span style="color:#91B859;"> PLAN</span><span style="color:#90A4AE;">                                                     </span></span>
<span class="line"><span style="color:#E2931D;">-------------------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#E2931D;"> Gather</span><span style="color:#90A4AE;">  (cost=1000.00..15554.43 </span><span style="color:#91B859;">rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> width=</span><span style="color:#F76D47;">45</span><span style="color:#90A4AE;">) (</span><span style="color:#E2931D;">actual</span><span style="color:#91B859;"> time=0.330..41.140</span><span style="color:#91B859;"> rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> loops=</span><span style="color:#F76D47;">1</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">   Workers</span><span style="color:#91B859;"> Planned:</span><span style="color:#F76D47;"> 2</span></span>
<span class="line"><span style="color:#E2931D;">   Workers</span><span style="color:#91B859;"> Launched:</span><span style="color:#F76D47;"> 2</span></span>
<span class="line"><span style="color:#E2931D;">   -</span><span style="color:#90A4AE;">&gt;  </span><span style="color:#91B859;">Parallel</span><span style="color:#91B859;"> Seq</span><span style="color:#91B859;"> Scan</span><span style="color:#91B859;"> on</span><span style="color:#91B859;"> tb1</span><span style="color:#90A4AE;">  (cost=0.00..14554.33 </span><span style="color:#91B859;">rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> width=</span><span style="color:#F76D47;">45</span><span style="color:#90A4AE;">) (</span><span style="color:#E2931D;">actual</span><span style="color:#91B859;"> time=21.906..34.424</span><span style="color:#91B859;"> rows=</span><span style="color:#F76D47;">0</span><span style="color:#91B859;"> loops=</span><span style="color:#F76D47;">3</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">         Filter:</span><span style="color:#90A4AE;"> (info </span><span style="color:#91B859;">=</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">ab0a99c8c702141d4ea40e3fd8e5777e</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">::text</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">         Rows</span><span style="color:#91B859;"> Removed</span><span style="color:#91B859;"> by</span><span style="color:#91B859;"> Filter:</span><span style="color:#F76D47;"> 333333</span></span>
<span class="line"><span style="color:#E2931D;"> Planning</span><span style="color:#91B859;"> Time:</span><span style="color:#F76D47;"> 0.063</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#E2931D;"> Execution</span><span style="color:#91B859;"> Time:</span><span style="color:#F76D47;"> 41.162</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">8</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 41.701</span><span style="color:#91B859;"> ms</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#关闭索引，使用全盘扫描</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># set enable_indexscan =off</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">SET</span></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 0.838</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># explain analyze </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> * from tb1 where id</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">9999</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">                                                   QUERY</span><span style="color:#91B859;"> PLAN</span><span style="color:#90A4AE;">                                                   </span></span>
<span class="line"><span style="color:#E2931D;">----------------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#E2931D;"> Bitmap</span><span style="color:#91B859;"> Heap</span><span style="color:#91B859;"> Scan</span><span style="color:#91B859;"> on</span><span style="color:#91B859;"> tb1</span><span style="color:#90A4AE;">  (cost=4.43..8.45 </span><span style="color:#91B859;">rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> width=</span><span style="color:#F76D47;">45</span><span style="color:#90A4AE;">) (</span><span style="color:#E2931D;">actual</span><span style="color:#91B859;"> time=0.042..0.042</span><span style="color:#91B859;"> rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> loops=</span><span style="color:#F76D47;">1</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">   Recheck</span><span style="color:#91B859;"> Cond:</span><span style="color:#90A4AE;"> (id </span><span style="color:#91B859;">=</span><span style="color:#F76D47;"> 9999</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">   Heap</span><span style="color:#91B859;"> Blocks:</span><span style="color:#91B859;"> exact=</span><span style="color:#F76D47;">1</span></span>
<span class="line"><span style="color:#E2931D;">   -</span><span style="color:#90A4AE;">&gt;  </span><span style="color:#91B859;">Bitmap</span><span style="color:#91B859;"> Index</span><span style="color:#91B859;"> Scan</span><span style="color:#91B859;"> on</span><span style="color:#91B859;"> idx_tb1</span><span style="color:#90A4AE;">  (cost=0.00..4.43 </span><span style="color:#91B859;">rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> width=</span><span style="color:#F76D47;">0</span><span style="color:#90A4AE;">) (</span><span style="color:#E2931D;">actual</span><span style="color:#91B859;"> time=0.013..0.014</span><span style="color:#91B859;"> rows=</span><span style="color:#F76D47;">1</span><span style="color:#91B859;"> loops=</span><span style="color:#F76D47;">1</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">         Index</span><span style="color:#91B859;"> Cond:</span><span style="color:#90A4AE;"> (id </span><span style="color:#91B859;">=</span><span style="color:#F76D47;"> 9999</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;"> Planning</span><span style="color:#91B859;"> Time:</span><span style="color:#F76D47;"> 0.108</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#E2931D;"> Execution</span><span style="color:#91B859;"> Time:</span><span style="color:#F76D47;"> 0.062</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">7</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 0.625</span><span style="color:#91B859;"> ms</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#开启索引</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># set enable_indexscan =on</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">SET</span></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 0.328</span><span style="color:#91B859;"> ms</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#删除索引</span></span>
<span class="line"><span style="color:#90A4AE;">testdb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># drop index idx_tb1</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">DROP</span><span style="color:#91B859;"> INDEX</span></span>
<span class="line"><span style="color:#E2931D;">Time:</span><span style="color:#F76D47;"> 4.781</span><span style="color:#91B859;"> ms</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br></div></div><h2 id="_6-总结pg的用户和角色管理" tabindex="-1">6. 总结pg的用户和角色管理 <a class="header-anchor" href="#_6-总结pg的用户和角色管理" aria-label="Permalink to &quot;6. 总结pg的用户和角色管理&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#查看所有用户</span></span>
<span class="line"><span style="color:#90A4AE;">hellodb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \du</span></span>
<span class="line"><span style="color:#E2931D;">                                   List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> roles</span></span>
<span class="line"><span style="color:#E2931D;"> Role</span><span style="color:#91B859;"> name</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">                         Attributes</span><span style="color:#39ADB5;">                         |</span><span style="color:#E2931D;"> Member</span><span style="color:#91B859;"> of</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">-----------+------------------------------------------------------------+-----------</span></span>
<span class="line"><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> Superuser,</span><span style="color:#91B859;"> Create</span><span style="color:#91B859;"> role,</span><span style="color:#91B859;"> Create</span><span style="color:#91B859;"> DB,</span><span style="color:#91B859;"> Replication,</span><span style="color:#91B859;"> Bypass</span><span style="color:#91B859;"> RLS</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">hellodb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \du</span></span>
<span class="line"><span style="color:#E2931D;">                                   List</span><span style="color:#91B859;"> of</span><span style="color:#91B859;"> roles</span></span>
<span class="line"><span style="color:#E2931D;"> Role</span><span style="color:#91B859;"> name</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">                         Attributes</span><span style="color:#39ADB5;">                         |</span><span style="color:#E2931D;"> Member</span><span style="color:#91B859;"> of</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">-----------+------------------------------------------------------------+-----------</span></span>
<span class="line"><span style="color:#E2931D;"> postgres</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> Superuser,</span><span style="color:#91B859;"> Create</span><span style="color:#91B859;"> role,</span><span style="color:#91B859;"> Create</span><span style="color:#91B859;"> DB,</span><span style="color:#91B859;"> Replication,</span><span style="color:#91B859;"> Bypass</span><span style="color:#91B859;"> RLS</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#查看当前用户</span></span>
<span class="line"><span style="color:#90A4AE;">hellodb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> user;</span></span>
<span class="line"><span style="color:#E2931D;">   user</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">----------</span></span>
<span class="line"><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">1</span><span style="color:#91B859;"> row</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">hellodb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># </span><span style="color:#39ADB5;font-style:italic;">select</span><span style="color:#90A4AE;"> current_user;</span></span>
<span class="line"><span style="color:#E2931D;"> current_user</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">--------------</span></span>
<span class="line"><span style="color:#E2931D;"> postgres</span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">1</span><span style="color:#91B859;"> row</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#显示表、视图、序列的权限分配情况</span></span>
<span class="line"><span style="color:#90A4AE;">hellodb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \z</span></span>
<span class="line"><span style="color:#E2931D;">                              Access</span><span style="color:#91B859;"> privileges</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">   Name</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> Type</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> Access</span><span style="color:#91B859;"> privileges</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Column</span><span style="color:#91B859;"> privileges</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Policies</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">-总结pgsql的数据目录中结构，说明每个文件的作用，并可以配上一些示例说明文件的作用-------+----------+-------+-------------------+-------------------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> classes</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> coc</span><span style="color:#39ADB5;">      |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> courses</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> scores</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> students</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> teachers</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> toc</span><span style="color:#39ADB5;">      |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">7</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">hellodb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \z students </span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">                              Access</span><span style="color:#91B859;"> privileges</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">   Name</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> Type</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> Access</span><span style="color:#91B859;"> privileges</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Column</span><span style="color:#91B859;"> privileges</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Policies</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">--------+----------+-------+-------------------+-------------------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> students</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">1</span><span style="color:#91B859;"> row</span><span style="color:#39ADB5;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">\z:</span><span style="color:#91B859;"> extra</span><span style="color:#91B859;"> argument</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">;</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;"> ignored</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#与\z功能相同</span></span>
<span class="line"><span style="color:#90A4AE;">hellodb</span><span style="color:#39ADB5;">=</span><span style="color:#90A4AE;"># \dp</span><span style="color:#39ADB5;">;</span></span>
<span class="line"><span style="color:#E2931D;">                              Access</span><span style="color:#91B859;"> privileges</span></span>
<span class="line"><span style="color:#E2931D;"> Schema</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;">   Name</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> Type</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> Access</span><span style="color:#91B859;"> privileges</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Column</span><span style="color:#91B859;"> privileges</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> Policies</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">--------+----------+-------+-------------------+-------------------+----------</span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> classes</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> coc</span><span style="color:#39ADB5;">      |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> courses</span><span style="color:#39ADB5;">  |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> scores</span><span style="color:#39ADB5;">   |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> students</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> teachers</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> public</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> toc</span><span style="color:#39ADB5;">      |</span><span style="color:#E2931D;"> table</span><span style="color:#39ADB5;"> |</span><span style="color:#39ADB5;">                   |</span><span style="color:#39ADB5;">                   |</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">7</span><span style="color:#91B859;"> rows</span><span style="color:#39ADB5;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h2 id="_7-总结pgsql的数据目录中结构-说明每个文件的作用-并可以配上一些示例说明文件的作用" tabindex="-1">7. 总结pgsql的数据目录中结构，说明每个文件的作用，并可以配上一些示例说明文件的作用 <a class="header-anchor" href="#_7-总结pgsql的数据目录中结构-说明每个文件的作用-并可以配上一些示例说明文件的作用" aria-label="Permalink to &quot;7. 总结pgsql的数据目录中结构，说明每个文件的作用，并可以配上一些示例说明文件的作用&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">数据库数据存放在环境变量PGDATA指向数据目录。这个目录是在安装时指定的，所以在安装时需要指</span></span>
<span class="line"><span style="color:#E2931D;">定一个合适的目录作为数据目录的根目录，而且，每一个数据库实例都要有一个对应的目录。目录的初</span></span>
<span class="line"><span style="color:#E2931D;">始化是使用initdb来完成的。</span></span>
<span class="line"><span style="color:#E2931D;">初始化完成后，PGDATA数据目录下就会生成三个配置文件</span></span>
<span class="line"><span style="color:#E2931D;">postgresql.conf</span><span style="color:#90A4AE;font-style:italic;"> #数据库实例的主配置文件，基本上所有的配置参数都在此文件中。</span></span>
<span class="line"><span style="color:#E2931D;">pg_hba.conf</span><span style="color:#90A4AE;font-style:italic;"> #认证配置文件，配置了允许哪些IP的主机访问数据库，认证的方法是什么等信息。</span></span>
<span class="line"><span style="color:#E2931D;">pg_ident.conf</span><span style="color:#90A4AE;font-style:italic;"> #认证方式ident的用户映射文件。</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">此外在PGDATA目录下还会生成如下一些子目录</span></span>
<span class="line"><span style="color:#E2931D;">base</span><span style="color:#90A4AE;font-style:italic;"> #默认表空间的目录,每个数据库都对应一个base目录下的子目录,每个表和索引对应一个独立文件</span></span>
<span class="line"><span style="color:#E2931D;">global</span><span style="color:#90A4AE;font-style:italic;"> #这个目录对应pg_global表空间,存放实例中的共享对象</span></span>
<span class="line"><span style="color:#E2931D;">pg_clog</span><span style="color:#90A4AE;font-style:italic;"> #存储事务提交状态数据</span></span>
<span class="line"><span style="color:#E2931D;">pg_bba.conf</span><span style="color:#90A4AE;font-style:italic;"> #数据库访问控制文件</span></span>
<span class="line"><span style="color:#E2931D;">pg_log</span><span style="color:#90A4AE;font-style:italic;"> #数据库系统日志目录，在查询一些系统错误时就可查看此目录下日志文件。(根据配置定义,可能没</span></span>
<span class="line"><span style="color:#E2931D;">有这个目录</span><span style="color:#90A4AE;">)</span></span>
<span class="line"><span style="color:#E2931D;">pg_xact</span><span style="color:#90A4AE;font-style:italic;"> #提交日志commit log的目录,pg 9之前叫pg_clog</span></span>
<span class="line"><span style="color:#E2931D;">pg_multixact</span><span style="color:#90A4AE;font-style:italic;"> #共享行锁的事务状态数据</span></span>
<span class="line"><span style="color:#E2931D;">pg_notify</span><span style="color:#90A4AE;font-style:italic;"> #异步消息相关的状态数据pg_serial #串行隔离级别的事务状态数据</span></span>
<span class="line"><span style="color:#E2931D;">pg_snapshots</span><span style="color:#90A4AE;font-style:italic;"> #存储执行了事务snapshot导出的状态数据pg_stat_tmp #统计信息的临时文件</span></span>
<span class="line"><span style="color:#E2931D;">pg_subtrans</span><span style="color:#90A4AE;font-style:italic;"> #子事务状态数据</span></span>
<span class="line"><span style="color:#E2931D;">pg_stat</span><span style="color:#90A4AE;font-style:italic;"> #统计信息的存储目录。关闭服务时,将pg_stat_tmp目录中的内容移动至此目录实现保存</span></span>
<span class="line"><span style="color:#E2931D;">pg_stat_tmp</span><span style="color:#90A4AE;font-style:italic;"> #统计信息的临时存储目录。开启数据库时存放统计信息</span></span>
<span class="line"><span style="color:#E2931D;">pg_tblsp</span><span style="color:#90A4AE;font-style:italic;"> #存储了指向各个用户自建表空间实际目录的链接文件</span></span>
<span class="line"><span style="color:#E2931D;">pg_twophase#使用两阶段提交功能时分布式事务的存储目录</span></span>
<span class="line"><span style="color:#E2931D;">pg_wal</span><span style="color:#90A4AE;font-style:italic;"> #WAL日志的目录,早期版一本目录为pg_xlog</span></span>
<span class="line"><span style="color:#E2931D;">PG_VERSION</span><span style="color:#90A4AE;font-style:italic;"> #数据库版本</span></span>
<span class="line"><span style="color:#E2931D;">postmaster.opts</span><span style="color:#90A4AE;font-style:italic;"> #记录数据库启动时的命令行选项</span></span>
<span class="line"><span style="color:#E2931D;">postmaster.pid</span><span style="color:#90A4AE;font-style:italic;"> #数据库启动的主进程信息文件，包括PID，SPGDATA目录,数据库启动时间，监听端口，</span></span>
<span class="line"><span style="color:#E2931D;">socket文件路径，临听地址,共享内存的地址信息(ipsc可查看</span><span style="color:#90A4AE;">),主进程状态</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><strong>包含的主要文件</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">ls</span><span style="color:#91B859;"> /pgsql/data/</span><span style="color:#91B859;"> -l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_8-尝试将pgsql新版本的运行日志存储到数据库" tabindex="-1">8.尝试将pgsql新版本的运行日志存储到数据库 <a class="header-anchor" href="#_8-尝试将pgsql新版本的运行日志存储到数据库" aria-label="Permalink to &quot;8.尝试将pgsql新版本的运行日志存储到数据库&quot;">​</a></h2><ol><li>修改配置文件打开运行日志</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#配置中添加以下两行</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># vim /pgsql/data/postgresql.conf </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">log_destination</span><span style="color:#91B859;"> =</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">csvlog</span><span style="color:#39ADB5;">&#39;</span><span style="color:#90A4AE;">  </span></span>
<span class="line"><span style="color:#E2931D;">logging_collector</span><span style="color:#91B859;"> =</span><span style="color:#91B859;"> on</span><span style="color:#90A4AE;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">root@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;"># su - postgres </span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">postgres@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;">$ pg_ctl restart</span></span>
<span class="line"><span style="color:#E2931D;">waiting</span><span style="color:#91B859;"> for</span><span style="color:#91B859;"> server</span><span style="color:#91B859;"> to</span><span style="color:#91B859;"> shut</span><span style="color:#91B859;"> down....</span><span style="color:#91B859;"> done</span></span>
<span class="line"><span style="color:#E2931D;">server</span><span style="color:#91B859;"> stopped</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;"> done</span></span>
<span class="line"><span style="color:#E2931D;">server</span><span style="color:#91B859;"> started</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#将log导入表中</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="2"><li>查看日志目录</li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">postgres@pgsql </span><span style="color:#39ADB5;">~]</span><span style="color:#90A4AE;">$ ls /pgsql/data/log/ -l</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/blog/other/task/sixth" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>第六周</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/blog/other/task/tenth" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>第十周</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2024 备案号：<a href="https://beian.miit.gov.cn/" target="_blank">渝ICP备2024011833号</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>