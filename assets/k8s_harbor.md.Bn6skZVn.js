import{_ as s,c as a,o as n,a4 as l}from"./chunks/framework.GYzjcnJh.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"k8s/harbor.md","filePath":"k8s/harbor.md"}'),e={name:"k8s/harbor.md"},p=l(`<blockquote><p>是 <code>VMware</code> 公司开源了企业级 <code>Registry</code> 项目, 其的目标是帮助用户迅速搭建一个企业级的 <code>Docker registry</code> 服务</p><p>Harbor 是基于 Docker Registry V2 版本</p></blockquote><p><strong>对硬件需求</strong></p><blockquote><p>CPU =&gt; 最小 2CPU/4CPU(首选)</p><p>Mem =&gt; 最小 4GB/8GB(首选)</p><p>Disk =&gt; 最小 40GB/160G(首选)</p></blockquote><h2 id="安装过程" tabindex="-1">安装过程 <a class="header-anchor" href="#安装过程" aria-label="Permalink to &quot;安装过程&quot;">​</a></h2><p>仓库地址：<a href="https://github.com/goharbor/harbor/releases" target="_blank" rel="noreferrer">https://github.com/goharbor/harbor/releases</a></p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">tar</span><span style="color:#91B859;"> xzvf</span><span style="color:#91B859;"> harbor-online-installer-version.tgz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6182B8;">cd</span><span style="color:#91B859;"> harbor</span></span>
<span class="line"><span style="color:#E2931D;">cp</span><span style="color:#91B859;"> harbor.yml.tmpl</span><span style="color:#91B859;"> harbor.yml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># 修改配置</span></span>
<span class="line"><span style="color:#E2931D;">hostname</span><span style="color:#91B859;">	ip</span><span style="color:#90A4AE;font-style:italic;"> # or domain</span></span>
<span class="line"><span style="color:#E2931D;">domain</span></span>
<span class="line"><span style="color:#E2931D;">harbor_admin_password</span><span style="color:#90A4AE;">	</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># 不使用https</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#https:</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">  # https port for harbor, default is 443</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">  #port: 443</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">  # The path of cert and key files for nginx</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">  #certificate: /your/certificate/path</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">  #private_key: /your/private/key/path</span></span>
<span class="line"><span style="color:#90A4AE;">  </span></span>
<span class="line"><span style="color:#90A4AE;">  </span></span>
<span class="line"><span style="color:#90A4AE;">  </span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">  # 启动安装脚本</span></span>
<span class="line"><span style="color:#E2931D;">  ./install.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="不使用https" tabindex="-1">不使用HTTPS <a class="header-anchor" href="#不使用https" aria-label="Permalink to &quot;不使用HTTPS&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#39ADB5;">{</span></span>
<span class="line"><span style="color:#E2931D;">&quot;insecure-registries&quot;</span><span style="color:#91B859;"> :</span><span style="color:#90A4AE;"> [</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">myregistrydomain.com:5000</span><span style="color:#39ADB5;">&quot;</span><span style="color:#90A4AE;">, </span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">0.0.0.0</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">]</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="harbor镜像代理" tabindex="-1">Harbor镜像代理 <a class="header-anchor" href="#harbor镜像代理" aria-label="Permalink to &quot;Harbor镜像代理&quot;">​</a></h2><ol><li><strong>仓库管理</strong></li></ol><p>​ 系统管理 - 仓库管理 - 新建项目:</p><table tabindex="0"><thead><tr><th style="text-align:center;">提供者</th><th style="text-align:center;">目标名</th><th style="text-align:center;">目标 URL</th><th style="text-align:left;">访问 ID 与密码</th></tr></thead><tbody><tr><td style="text-align:center;">Docker Hub</td><td style="text-align:center;">docker.io</td><td style="text-align:center;"><a href="https://hub.docker.com/" target="_blank" rel="noreferrer">https://hub.docker.com</a></td><td style="text-align:left;">根据实际，一般代理公共项目留空即可</td></tr></tbody></table><p>​ <img src="http://pic.justdoiit.top/imgs/2024-03-13-1710291981.webp" alt="" loading="lazy"></p><ol start="2"><li><strong>新建项目</strong></li></ol><p><img src="http://pic.justdoiit.top/imgs/2024-03-13-1710291897.webp" alt="" loading="lazy"></p><h2 id="使用-harbor" tabindex="-1">使用 harbor <a class="header-anchor" href="#使用-harbor" aria-label="Permalink to &quot;使用 harbor&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;"># 镜像推送</span></span>
<span class="line"><span style="color:#E2931D;">docker</span><span style="color:#91B859;"> login</span><span style="color:#91B859;"> -u</span><span style="color:#91B859;"> admin</span><span style="color:#91B859;"> -p</span><span style="color:#91B859;"> Harbor12345</span><span style="color:#91B859;"> 192.168.188.222:8070</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># 镜像打包时候需要按一定规则 tag</span></span>
<span class="line"><span style="color:#E2931D;">docker</span><span style="color:#91B859;"> pull</span><span style="color:#91B859;"> nginx</span></span>
<span class="line"><span style="color:#E2931D;">docker</span><span style="color:#91B859;"> tag</span><span style="color:#91B859;"> nginx</span><span style="color:#91B859;"> 192.168.188.222:8070/library/nginx</span></span>
<span class="line"><span style="color:#E2931D;">docker</span><span style="color:#91B859;"> push</span><span style="color:#91B859;"> 192.168.188.222:8070/library/nginx</span></span>
<span class="line"><span style="color:#E2931D;">docker</span><span style="color:#91B859;"> rmi</span><span style="color:#91B859;"> -f</span><span style="color:#91B859;"> 192.168.188.222:8070/library/nginx</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>`,17),r=[p];function t(o,c,i,b,y,d){return n(),a("div",null,r)}const m=s(e,[["render",t]]);export{u as __pageData,m as default};
