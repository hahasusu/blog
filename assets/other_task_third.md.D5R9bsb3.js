import{_ as s,c as n,o as a,a4 as l}from"./chunks/framework.GYzjcnJh.js";const d=JSON.parse('{"title":"第三周","description":"","frontmatter":{"title":"第三周","date":"2023-10-11T14:04:31.000Z","tags":["task"],"categories":["Task"],"deep":true},"headers":[],"relativePath":"other/task/third.md","filePath":"other/task/third.md"}'),p={name:"other/task/third.md"},e=l(`<h2 id="_1-基于gcc说明c语言编译过程" tabindex="-1">1 基于gcc说明c语言编译过程 <a class="header-anchor" href="#_1-基于gcc说明c语言编译过程" aria-label="Permalink to &quot;1 基于gcc说明c语言编译过程&quot;">​</a></h2><p>尝试基于gcc命令说明 c语言编译过程。</p><ol><li><strong>分步编译运行</strong></li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">## 1对hello.c进行预处理，生成hello.i文件</span></span>
<span class="line"><span style="color:#E2931D;">gcc</span><span style="color:#91B859;"> -E</span><span style="color:#91B859;"> hello.c</span><span style="color:#91B859;"> -o</span><span style="color:#91B859;"> hello.i</span><span style="color:#90A4AE;">  </span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 2对预处理文件进行编译，生成汇编文件</span></span>
<span class="line"><span style="color:#E2931D;">gcc</span><span style="color:#91B859;"> -S</span><span style="color:#91B859;"> hello.i</span><span style="color:#91B859;"> -o</span><span style="color:#91B859;"> hello.s</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 3对汇编文件进行编译，生成目标文件</span></span>
<span class="line"><span style="color:#E2931D;">gcc</span><span style="color:#91B859;"> -C</span><span style="color:#91B859;"> hello.s</span><span style="color:#91B859;"> -o</span><span style="color:#91B859;"> hello.o</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 4对目标文件进行链接，生成可执行文件</span></span>
<span class="line"><span style="color:#E2931D;">gcc</span><span style="color:#91B859;"> hello.o</span><span style="color:#91B859;"> -o</span><span style="color:#91B859;"> hello</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li><strong>一步实现</strong></li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">gcc</span><span style="color:#91B859;"> hello.c</span><span style="color:#91B859;"> -o</span><span style="color:#91B859;"> hello</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2-包管理器总结" tabindex="-1">2 包管理器总结 <a class="header-anchor" href="#_2-包管理器总结" aria-label="Permalink to &quot;2 包管理器总结&quot;">​</a></h2><p>总结程序包管理器有哪些，以及包中包含什么内容的文件，尝试这些文件如何获取命令获取？ yum/dnf/apt</p><h3 id="_2-1-主流的包管理器" tabindex="-1">2.1 主流的包管理器 <a class="header-anchor" href="#_2-1-主流的包管理器" aria-label="Permalink to &quot;2.1 主流的包管理器&quot;">​</a></h3><ol><li>redhat: rpm文件，rpm包管理器</li><li>debian: deb文件，dpkg包管理器</li></ol><h3 id="_2-2-程序包内的文件" tabindex="-1">2.2 程序包内的文件 <a class="header-anchor" href="#_2-2-程序包内的文件" aria-label="Permalink to &quot;2.2 程序包内的文件&quot;">​</a></h3><ul><li>二进制文件</li><li>库文件</li><li>配置文件</li><li>帮助文件</li></ul><h2 id="_3-程序包获取途径" tabindex="-1">3 程序包获取途径 <a class="header-anchor" href="#_3-程序包获取途径" aria-label="Permalink to &quot;3 程序包获取途径&quot;">​</a></h2><p>总结程序包获取途径，以及rpm, yum, apt命令选项示例。</p><p>获取途径：系统发行版的光盘或第三方镜像网站</p><h3 id="_3-1-镜像网站" tabindex="-1">3.1 镜像网站 <a class="header-anchor" href="#_3-1-镜像网站" aria-label="Permalink to &quot;3.1 镜像网站&quot;">​</a></h3><ol><li>官方centos <a href="https://www.centos.org/download" target="_blank" rel="noreferrer">https://www.centos.org/download</a></li><li>阿里 <a href="https://developer.aliyun.com/mirror" target="_blank" rel="noreferrer">https://developer.aliyun.com/mirror</a></li><li>腾讯 <a href="https://mirrors.cloud.tencent.com" target="_blank" rel="noreferrer">https://mirrors.cloud.tencent.com</a></li><li>华为 <a href="https://mirrors.huaweicloud.com" target="_blank" rel="noreferrer">https://mirrors.huaweicloud.com</a></li><li>清华 <a href="https://mirror.tuna.tsinghua.edu.cn" target="_blank" rel="noreferrer">https://mirror.tuna.tsinghua.edu.cn</a></li><li>中科大 <a href="https://mirrors.ustc.edu.cn" target="_blank" rel="noreferrer">https://mirrors.ustc.edu.cn</a></li></ol><p><strong>Ubuntu</strong></p><ul><li><a href="http://cdimage.ubuntu.com/releases/" target="_blank" rel="noreferrer">http://cdimage.ubuntu.com/releases/</a></li><li><a href="http://releases.ubuntu.com" target="_blank" rel="noreferrer">http://releases.ubuntu.com</a></li></ul><h3 id="_3-2-rpm的使用" tabindex="-1">3.2 rpm的使用 <a class="header-anchor" href="#_3-2-rpm的使用" aria-label="Permalink to &quot;3.2 rpm的使用&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">    # 常用命令</span></span>
<span class="line"><span style="color:#E2931D;">    -ivh</span><span style="color:#90A4AE;font-style:italic;">    # 显示安装过程</span></span>
<span class="line"><span style="color:#E2931D;">    -q</span><span style="color:#90A4AE;font-style:italic;">      # 查看安装的包名</span></span>
<span class="line"><span style="color:#E2931D;">    -ql</span><span style="color:#90A4AE;font-style:italic;">     # 显示详细信息</span></span>
<span class="line"><span style="color:#E2931D;">    -qi</span><span style="color:#90A4AE;font-style:italic;">     # </span></span>
<span class="line"><span style="color:#E2931D;">    -qf</span><span style="color:#90A4AE;font-style:italic;">     # 查询文件来自哪个包</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-3-yum的使用" tabindex="-1">3.3 yum的使用 <a class="header-anchor" href="#_3-3-yum的使用" aria-label="Permalink to &quot;3.3 yum的使用&quot;">​</a></h3><p>yum能自动查找并解决rpm包之间的依赖关系</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">    # 常用命令</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> provides</span><span style="color:#90A4AE;"> *</span><span style="color:#91B859;">/route</span><span style="color:#91B859;"> 已知文件名路径，查找出对应的软件仓库</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> -y</span><span style="color:#90A4AE;font-style:italic;"> # 忽略询问</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> install</span><span style="color:#90A4AE;font-style:italic;"> # 安装软件</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> info</span><span style="color:#90A4AE;font-style:italic;"> # 查询软件详细信息</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> remove</span><span style="color:#90A4AE;font-style:italic;"> # 卸载程序包</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> -y</span><span style="color:#91B859;"> install</span><span style="color:#91B859;"> --downloadonly</span><span style="color:#91B859;"> --downloaddir=/data/httpd</span><span style="color:#91B859;"> httpd</span><span style="color:#91B859;"> 只下载相关依赖包不安装</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> clean</span><span style="color:#90A4AE;"> [ </span><span style="color:#91B859;">packages</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> metadata</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> expire-cache</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> rpmdb</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> plugins</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> all</span><span style="color:#91B859;"> ]</span><span style="color:#91B859;"> 清除缓存</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> makecache</span><span style="color:#90A4AE;font-style:italic;"> # 构建缓存</span></span>
<span class="line"><span style="color:#E2931D;">    yum</span><span style="color:#91B859;"> history</span><span style="color:#90A4AE;font-style:italic;"> # 安装历史</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-4-apt的使用" tabindex="-1">3.4 apt的使用 <a class="header-anchor" href="#_3-4-apt的使用" aria-label="Permalink to &quot;3.4 apt的使用&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">    # apt常用选项</span></span>
<span class="line"><span style="color:#E2931D;">    apt</span><span style="color:#91B859;"> install</span><span style="color:#90A4AE;font-style:italic;"> # 安装</span></span>
<span class="line"><span style="color:#E2931D;">    apt</span><span style="color:#91B859;"> show</span><span style="color:#90A4AE;font-style:italic;"> # 显示安装细节</span></span>
<span class="line"><span style="color:#E2931D;">    apt</span><span style="color:#91B859;"> list</span><span style="color:#90A4AE;font-style:italic;"> # 列出包含条件的包</span></span>
<span class="line"><span style="color:#E2931D;">    apt</span><span style="color:#91B859;"> remove/purge</span><span style="color:#90A4AE;font-style:italic;"> # 卸载（推荐使用purge卸载，可移除软件包和配置文件）</span></span>
<span class="line"><span style="color:#E2931D;">    apt</span><span style="color:#91B859;"> update</span><span style="color:#90A4AE;font-style:italic;"> # 刷新存储库索引</span></span>
<span class="line"><span style="color:#E2931D;">    apt</span><span style="color:#91B859;"> upgrade</span><span style="color:#90A4AE;font-style:italic;"> # 升级所有可升级的软件包</span></span>
<span class="line"><span style="color:#E2931D;">    apt</span><span style="color:#91B859;"> full-upgrade</span><span style="color:#90A4AE;font-style:italic;"> # 在升级软件包时自动处理依赖关系</span></span>
<span class="line"><span style="color:#E2931D;">    apt</span><span style="color:#91B859;"> search</span><span style="color:#90A4AE;font-style:italic;"> # 搜索应用程序</span></span>
<span class="line"><span style="color:#E2931D;">    apt-cache</span><span style="color:#91B859;"> stats</span><span style="color:#90A4AE;font-style:italic;"> # 查看包相关信息</span></span>
<span class="line"><span style="color:#E2931D;">    dpkg</span><span style="color:#91B859;"> -S</span><span style="color:#91B859;"> filename</span><span style="color:#90A4AE;font-style:italic;"> # 查找存在的文件来自于哪个包</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">    # apt包索引配置文件路径</span></span>
<span class="line"><span style="color:#E2931D;">    /etc/apt/source.list</span></span>
<span class="line"><span style="color:#E2931D;">    /etc/apt/source.list.d</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_4-yum工作原理及搭建yum仓库" tabindex="-1">4 yum工作原理及搭建yum仓库 <a class="header-anchor" href="#_4-yum工作原理及搭建yum仓库" aria-label="Permalink to &quot;4 yum工作原理及搭建yum仓库&quot;">​</a></h2><p>简要总结yum/dnf工作原理。并搭建私有yum仓库(base, epel源）给另一个虚拟机使用。</p><ol><li><strong>yum/dnf 工作原理</strong></li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#yum/dnf基于C/S模式</span></span>
<span class="line"><span style="color:#E2931D;">1、yum服务器存放rpm包和相关包的元数据库</span></span>
<span class="line"><span style="color:#E2931D;">2、yum客户端访问yum服务器进行安装和查询等</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#yum实现过程</span></span>
<span class="line"><span style="color:#E2931D;">现在yum服务器上创建yum</span><span style="color:#91B859;"> repository（仓库），在仓库中事先存储了众多</span></span>
<span class="line"><span style="color:#E2931D;">rpm包，以及包的相关的元数据文件（放置于特定目录repodata下），当yum客</span></span>
<span class="line"><span style="color:#E2931D;">户端利用yum/dnf工具进行安装包时，会自动下载repodata中的元数据，查询</span></span>
<span class="line"><span style="color:#E2931D;">元数据是否存在相关的包及依赖关系，自动从仓库中找到相关的包下载并安装。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li><strong><a href="./yum-private">搭建yum私有仓库</a></strong></li></ol><h2 id="_5-系统安装后的初始化步骤" tabindex="-1">5 系统安装后的初始化步骤 <a class="header-anchor" href="#_5-系统安装后的初始化步骤" aria-label="Permalink to &quot;5 系统安装后的初始化步骤&quot;">​</a></h2><p>总结系统安装之后的常用初始化步骤。rocky/ubuntu</p><h3 id="_5-1-更改yum源" tabindex="-1">5.1 更改yum源 <a class="header-anchor" href="#_5-1-更改yum源" aria-label="Permalink to &quot;5.1 更改yum源&quot;">​</a></h3><p><code>Centos</code>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">## 备份</span></span>
<span class="line"><span style="color:#E2931D;">mv</span><span style="color:#91B859;"> /etc/yum.repos.d/CentOS-Base.repo</span><span style="color:#91B859;"> /etc/yum.repos.d/CentOS-Base.repo_bak</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 更改为清华</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 对于 CentOS 7</span></span>
<span class="line"><span style="color:#E2931D;">sudo</span><span style="color:#91B859;"> sed</span><span style="color:#91B859;"> -e</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">s|^mirrorlist=|#mirrorlist=|g</span><span style="color:#39ADB5;">&#39;</span><span style="color:#90A4AE;"> \\</span></span>
<span class="line"><span style="color:#91B859;">         -e</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">s|^#baseurl=http://mirror.centos.org/centos|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos|g</span><span style="color:#39ADB5;">&#39;</span><span style="color:#90A4AE;"> \\</span></span>
<span class="line"><span style="color:#91B859;">         -i.bak</span><span style="color:#90A4AE;"> \\</span></span>
<span class="line"><span style="color:#91B859;">         /etc/yum.repos.d/CentOS-</span><span style="color:#90A4AE;">*</span><span style="color:#91B859;">.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 对于 CentOS 8</span></span>
<span class="line"><span style="color:#E2931D;">sudo</span><span style="color:#91B859;"> sed</span><span style="color:#91B859;"> -e</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">s|^mirrorlist=|#mirrorlist=|g</span><span style="color:#39ADB5;">&#39;</span><span style="color:#90A4AE;"> \\</span></span>
<span class="line"><span style="color:#91B859;">         -e</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">s|^#baseurl=http://mirror.centos.org/$contentdir|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos|g</span><span style="color:#39ADB5;">&#39;</span><span style="color:#90A4AE;"> \\</span></span>
<span class="line"><span style="color:#91B859;">         -i.bak</span><span style="color:#90A4AE;"> \\</span></span>
<span class="line"><span style="color:#91B859;">         /etc/yum.repos.d/CentOS-</span><span style="color:#90A4AE;">*</span><span style="color:#91B859;">.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 更新软件包缓存</span></span>
<span class="line"><span style="color:#E2931D;">yum</span><span style="color:#91B859;"> makecache</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>Ubuntu</code></p><ol><li>中科大 <a href="https://mirrors.ustc.edu.cn/help/ubuntu.html#id7" target="_blank" rel="noreferrer">https://mirrors.ustc.edu.cn/help/ubuntu.html#id7</a></li><li>清华 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/" target="_blank" rel="noreferrer">https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/</a></li></ol><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">## 备份</span></span>
<span class="line"><span style="color:#E2931D;">/etc/apt/sources.list</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 更改为清华</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span>
<span class="line"><span style="color:#E2931D;">deb</span><span style="color:#91B859;"> https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</span><span style="color:#91B859;"> jammy</span><span style="color:#91B859;"> main</span><span style="color:#91B859;"> restricted</span><span style="color:#91B859;"> universe</span><span style="color:#91B859;"> multiverse</span></span>
<span class="line"><span style="color:#E2931D;">deb</span><span style="color:#91B859;"> https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</span><span style="color:#91B859;"> jammy-updates</span><span style="color:#91B859;"> main</span><span style="color:#91B859;"> restricted</span><span style="color:#91B859;"> universe</span><span style="color:#91B859;"> multiverse</span></span>
<span class="line"><span style="color:#E2931D;">deb</span><span style="color:#91B859;"> https://mirrors.tuna.tsinghua.edu.cn/ubuntu/</span><span style="color:#91B859;"> jammy-backports</span><span style="color:#91B859;"> main</span><span style="color:#91B859;"> restricted</span><span style="color:#91B859;"> universe</span><span style="color:#91B859;"> multiverse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">deb</span><span style="color:#91B859;"> http://security.ubuntu.com/ubuntu/</span><span style="color:#91B859;"> jammy-security</span><span style="color:#91B859;"> main</span><span style="color:#91B859;"> restricted</span><span style="color:#91B859;"> universe</span><span style="color:#91B859;"> multiverse</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_5-2-关闭selinux" tabindex="-1">5.2 关闭SELinux <a class="header-anchor" href="#_5-2-关闭selinux" aria-label="Permalink to &quot;5.2 关闭SELinux&quot;">​</a></h3><p><strong>需要重启生效</strong><br><code>sed -i.bak &#39;/SELINUX=enforcing/c SELINUX=disabled&#39; /etc/selinux/config</code></p><h3 id="_5-3-关闭防火墙" tabindex="-1">5.3 关闭防火墙 <a class="header-anchor" href="#_5-3-关闭防火墙" aria-label="Permalink to &quot;5.3 关闭防火墙&quot;">​</a></h3><p><code>systemctl disable --now firewalld</code></p><h3 id="_5-4-修改网卡配置" tabindex="-1">5.4 修改网卡配置 <a class="header-anchor" href="#_5-4-修改网卡配置" aria-label="Permalink to &quot;5.4 修改网卡配置&quot;">​</a></h3><p><code>centos</code>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">## /etc/sysconfig/network-scripts/ifcfg-ens33</span></span>
<span class="line"><span style="color:#90A4AE;">DEVICE</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">ens33</span></span>
<span class="line"><span style="color:#90A4AE;">NAME</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">ens33</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#BOOTPROTO=dhcp  //自动分配IP</span></span>
<span class="line"><span style="color:#90A4AE;">BOOTPROTO</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">static</span><span style="color:#E2931D;">  //配置静态IP</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">IPADDR</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">192.168.1.101</span></span>
<span class="line"><span style="color:#90A4AE;">GATEWAY</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">192.168.1.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">NETMASK</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">255.255.255.0</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">#PREFIX=24  //子网掩码， 和上面等价</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">DNS1</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">192.168.1.1</span></span>
<span class="line"><span style="color:#90A4AE;">DNS2</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">223.5.5.5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>ubuntu</code>:</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">## 修改网卡名称</span></span>
<span class="line"><span style="color:#91B859;">sed -ri &#39;/GRUB_CMDLINE_LINUX=/s#(.*)&quot;$#\\1 net.ifnames=0#&#39; /etc/default/grub</span></span>
<span class="line"><span style="color:#91B859;">grub2-mkconfig  -o /boot/grub2/grub.cfg ; reboot</span></span>
<span class="line"><span style="color:#91B859;">vim /etc/netplan/00-installer-config.yaml</span></span>
<span class="line"><span style="color:#E53935;">network</span><span style="color:#39ADB5;">:</span></span>
<span class="line"><span style="color:#E53935;">  version</span><span style="color:#39ADB5;">:</span><span style="color:#F76D47;"> 2</span></span>
<span class="line"><span style="color:#E53935;">  renderer</span><span style="color:#39ADB5;">:</span><span style="color:#91B859;"> networkd</span></span>
<span class="line"><span style="color:#E53935;">  ethernets</span><span style="color:#39ADB5;">:</span></span>
<span class="line"><span style="color:#E53935;">    eth0</span><span style="color:#39ADB5;">:</span></span>
<span class="line"><span style="color:#E53935;">      dhcp4</span><span style="color:#39ADB5;">:</span><span style="color:#FF5370;"> no</span></span>
<span class="line"><span style="color:#E53935;">      dhcp6</span><span style="color:#39ADB5;">:</span><span style="color:#FF5370;"> no</span></span>
<span class="line"><span style="color:#E53935;">      addresses</span><span style="color:#39ADB5;">:</span><span style="color:#39ADB5;"> [</span><span style="color:#91B859;">192.168.1.1/24</span><span style="color:#39ADB5;">]</span></span>
<span class="line"><span style="color:#E53935;">      gateway4</span><span style="color:#39ADB5;">:</span><span style="color:#F76D47;"> 192.168.1.1</span></span>
<span class="line"><span style="color:#E53935;">      nameservers</span><span style="color:#39ADB5;">:</span></span>
<span class="line"><span style="color:#E53935;">        addresses</span><span style="color:#39ADB5;">:</span><span style="color:#39ADB5;"> [</span><span style="color:#F76D47;">192.168.1.1</span><span style="color:#39ADB5;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#91B859;">sudo netplan apply //生效配置</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_6-一建安装httpd脚本" tabindex="-1">6 一建安装httpd脚本 <a class="header-anchor" href="#_6-一建安装httpd脚本" aria-label="Permalink to &quot;6 一建安装httpd脚本&quot;">​</a></h2><p>解读一键安装httpd脚本，并自行实现一个一键安装脚本，要求<br> 1）基于位置变量传递版本号<br> 2）基于独立函数进行初始化步骤，禁用防火墙，安装开发依赖包。<br> 3）基于独立函数进行下载包，解压包。<br> 4）基于独立函数进行编译，安装包。<br> 5）基于独立函数完成链接包。<br> 6）启动服务，并输出自定义的语句，安装xxx服务</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#90A4AE;font-style:italic;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">CPUS</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">\`</span><span style="color:#E2931D;">grep</span><span style="color:#91B859;"> -c processor /proc/cpuinfo</span><span style="color:#39ADB5;">\`</span></span>
<span class="line"><span style="color:#90A4AE;">VERSION</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&#39;</span><span style="color:#91B859;">2.4.57</span><span style="color:#39ADB5;">&#39;</span></span>
<span class="line"><span style="color:#90A4AE;">URL</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">&quot;</span><span style="color:#91B859;">https://dlcdn.apache.org/httpd/httpd-</span><span style="color:#39ADB5;">\${</span><span style="color:#90A4AE;">VERSION</span><span style="color:#39ADB5;">}</span><span style="color:#91B859;">.tar.bz2</span><span style="color:#39ADB5;">&quot;</span></span>
<span class="line"><span style="color:#90A4AE;">INSTALL_DIR</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">/apps/httpd</span></span>
<span class="line"><span style="color:#6182B8;">green</span><span style="color:#39ADB5;">()</span><span style="color:#39ADB5;"> {</span></span>
<span class="line"><span style="color:#6182B8;">    echo</span><span style="color:#91B859;"> -e</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">\\e[32m</span><span style="color:#90A4AE;font-style:italic;">$1</span><span style="color:#91B859;">\\e[0m</span><span style="color:#39ADB5;">&quot;</span></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"><span style="color:#6182B8;">red</span><span style="color:#39ADB5;">()</span><span style="color:#39ADB5;"> {</span></span>
<span class="line"><span style="color:#6182B8;">    echo</span><span style="color:#91B859;"> -e</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">\\e[31m</span><span style="color:#90A4AE;font-style:italic;">$1</span><span style="color:#91B859;">\\e[0m</span><span style="color:#39ADB5;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;">os</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">centos</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## yum命令不存在，说明是ubuntu</span></span>
<span class="line"><span style="color:#6182B8;">command</span><span style="color:#91B859;"> -v</span><span style="color:#91B859;"> yum</span><span style="color:#39ADB5;"> &gt;</span><span style="color:#91B859;"> /dev/null</span><span style="color:#39ADB5;"> 2&gt;&amp;1</span><span style="color:#39ADB5;"> ||</span><span style="color:#90A4AE;"> os</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">ubuntu</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 安装依赖</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">if</span><span style="color:#39ADB5;"> [[</span><span style="color:#90A4AE;"> $os </span><span style="color:#39ADB5;">==</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">centos</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;"> ]];</span><span style="color:#39ADB5;font-style:italic;"> then</span></span>
<span class="line"><span style="color:#E2931D;">   systemctl</span><span style="color:#91B859;"> disable</span><span style="color:#91B859;"> --now</span><span style="color:#91B859;"> firewalld</span></span>
<span class="line"><span style="color:#E2931D;">   yum</span><span style="color:#91B859;"> -y</span><span style="color:#91B859;"> install</span><span style="color:#91B859;"> gcc</span><span style="color:#91B859;"> make</span><span style="color:#91B859;"> apr</span><span style="color:#91B859;"> apr-devel</span><span style="color:#91B859;"> apr-util-devel</span><span style="color:#91B859;"> openssl-devel</span><span style="color:#91B859;"> pcre-devel</span><span style="color:#91B859;"> redhat-rpm-config</span><span style="color:#91B859;"> bzip2</span><span style="color:#91B859;"> wget</span><span style="color:#91B859;"> --skip-broken</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">else</span></span>
<span class="line"><span style="color:#E2931D;">   apt</span><span style="color:#91B859;"> update</span></span>
<span class="line"><span style="color:#E2931D;">   apt</span><span style="color:#91B859;"> install</span><span style="color:#91B859;"> -y</span><span style="color:#91B859;"> libapr</span><span style="color:#90A4AE;">*</span><span style="color:#91B859;">  libpcre3</span><span style="color:#90A4AE;">*</span><span style="color:#91B859;"> libssl-dev</span><span style="color:#91B859;"> make</span><span style="color:#91B859;"> wget</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 下载源码包,并解压</span></span>
<span class="line"><span style="color:#6182B8;">cd</span><span style="color:#91B859;"> /usr/local/src</span></span>
<span class="line"><span style="color:#E2931D;">wget</span><span style="color:#90A4AE;"> $URL </span><span style="color:#39ADB5;">||</span><span style="color:#39ADB5;"> (</span><span style="color:#E2931D;">red</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;">download error</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;">;</span><span style="color:#6182B8;">exit</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#E2931D;">tar</span><span style="color:#91B859;"> xf</span><span style="color:#91B859;"> httpd-</span><span style="color:#90A4AE;">$VERSION</span><span style="color:#91B859;">.tar.bz2</span></span>
<span class="line"><span style="color:#6182B8;">cd</span><span style="color:#91B859;"> httpd-</span><span style="color:#90A4AE;">$VERSION</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 编译安装</span></span>
<span class="line"><span style="color:#E2931D;">./configure</span><span style="color:#91B859;"> --prefix=/apps/httpd</span></span>
<span class="line"><span style="color:#E2931D;">make</span><span style="color:#91B859;"> -j</span><span style="color:#90A4AE;"> $CPUS </span><span style="color:#39ADB5;">&amp;&amp;</span><span style="color:#E2931D;"> make</span><span style="color:#91B859;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 软链接启动</span></span>
<span class="line"><span style="color:#E2931D;">ln</span><span style="color:#91B859;"> -s</span><span style="color:#91B859;"> /apps/httpd/bin/apachectl</span><span style="color:#91B859;"> /usr/local/bin</span></span>
<span class="line"><span style="color:#E2931D;">apachectl</span><span style="color:#91B859;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;">## 提示</span></span>
<span class="line"><span style="color:#90A4AE;">addr</span><span style="color:#39ADB5;">=</span><span style="color:#39ADB5;">\`</span><span style="color:#E2931D;">hostname</span><span style="color:#91B859;"> -I </span><span style="color:#39ADB5;">|</span><span style="color:#E2931D;"> cut</span><span style="color:#91B859;"> -d</span><span style="color:#39ADB5;">&#39;</span><span style="color:#39ADB5;"> &#39;</span><span style="color:#91B859;"> -f1</span><span style="color:#39ADB5;">\`</span></span>
<span class="line"><span style="color:#E2931D;">green</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">httpd服务安装成功 http://</span><span style="color:#39ADB5;">\${</span><span style="color:#90A4AE;">addr</span><span style="color:#39ADB5;">}&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="_7-osi模型" tabindex="-1">7 OSI模型 <a class="header-anchor" href="#_7-osi模型" aria-label="Permalink to &quot;7 OSI模型&quot;">​</a></h2><p>总结开放系统互联OSI模型，每层作用及对应的协议。</p><blockquote><p>OSI模型总共有七层，分别是物理层，数据链路层，网络层，传输层，会话层，表示层以及应用层。</p></blockquote><div class="language-vim line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vim</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#F76D47;">1</span><span style="color:#90A4AE;">.物理层</span></span>
<span class="line"><span style="color:#90A4AE;">	物理层用于建立维护断开物理连接，主要是网线，中继器，调制解调器等。</span></span>
<span class="line"><span style="color:#F76D47;">2</span><span style="color:#90A4AE;">.数据链路层</span></span>
<span class="line"><span style="color:#90A4AE;">	数据链路层的主要功能就是合成数据块，封装成帧 与其他计算机进行通信的APP应用程序，支持APP应用程序的通信服务，同时通过端口与端口之间连接，进行物理寻址。寻找MAC地址。数据链路层主要设备是交换机。</span></span>
<span class="line"><span style="color:#F76D47;">3</span><span style="color:#90A4AE;">.网络层</span></span>
<span class="line"><span style="color:#90A4AE;">   网络层是OSI参考模型中的第三层，介于传输层和数据链路层之间，它在数据链路层提供的两个相邻端点之间的数据帧的传送功能上，进一步管理网络中的数据通信，将数据设法从源端经过若干个中间节点传送到目的端，从而向传输层提供最基本的端到端的数据传送服务，网络层进行逻辑地址寻址，实现在不同网络的选择。主要的设备是路由器。</span></span>
<span class="line"><span style="color:#F76D47;">4</span><span style="color:#90A4AE;">.传输层</span></span>
<span class="line"><span style="color:#90A4AE;">    传输层位于网络层与会话层之间，传输层在终端用户之间提供透明的数据传输，向上层提供可靠的数据传输服务。传输层在给定的链路上通过流量控制、分段/重组和差错控制来保证数据传输的可靠性。里面有TCP协议，保证传输的稳定安全，UDP协议，保证传输的速度。主要的设备是防火墙。</span></span>
<span class="line"><span style="color:#F76D47;">5</span><span style="color:#90A4AE;">.会话层</span></span>
<span class="line"><span style="color:#90A4AE;">     位于传输层与表示层之间，主要的功能是对话管理，数据流同步和重新同步。主要的工具像QQ，微信。</span></span>
<span class="line"><span style="color:#F76D47;">6</span><span style="color:#90A4AE;">.表示层</span></span>
<span class="line"><span style="color:#90A4AE;">     位于会话层与应用层之间，表示层向上对应用层服务，向下接受来自会话层的服务。表示层为在应用过程之间传送的信息提供表示方法的服务，它只关心信息发出的语法和语义。 </span></span>
<span class="line"><span style="color:#F76D47;">7</span><span style="color:#90A4AE;">.应用层</span></span>
<span class="line"><span style="color:#90A4AE;">    应用层其功能为“处理”，即通过云计算平台进行信息处理。应用层与最低端的感知层一起，是物联网的显著特征和核心所在，应用层可以对感知层采集数据进行计算、处理和知识挖掘，从而实现对物理世界的实时控制、精确管理和科学决策。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_8-tcp总结" tabindex="-1">8 TCP总结 <a class="header-anchor" href="#_8-tcp总结" aria-label="Permalink to &quot;8 TCP总结&quot;">​</a></h2><p>总结TCP包头结构，TCP三次握手，4次挥手。<br><code>TCP包头</code></p><div class="language-vim line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vim</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#F76D47;">1</span><span style="color:#90A4AE;">、源端口、目标端口：计算机之间进程的通信是通过端口连接的，同一时间一个端口只允许一个进程占用，所以通过源端口和目的端口就可以知道那两个进程通信。源端口、目标端口是用16位表示的，可推算计算机的端口个数为2^16个</span><span style="color:#39ADB5;">,</span><span style="color:#90A4AE;">即65536</span></span>
<span class="line"><span style="color:#F76D47;">2</span><span style="color:#90A4AE;">、序列号：表示本报文段所发送数据的第一个字节的编号。在TCP连接中所传送的字节流的每一个字节都会按顺序编号。由于序列号由32位表示，所以每232个字节，就会出现序列号回绕，再次从 </span><span style="color:#F76D47;">0</span><span style="color:#90A4AE;"> 开始</span></span>
<span class="line"><span style="color:#F76D47;">3</span><span style="color:#90A4AE;">、确认号：表示接收方期望收到发送方下一个报文段的第一个字节数据的编号。也就是告诉发送方：我希望你（指发送方）下次发送的数据的第一个字节数据的编号为此确认号</span></span>
<span class="line"><span style="color:#F76D47;">4</span><span style="color:#90A4AE;">、数据偏移：表示TCP报文段的首部长度，共4位，由于TCP首部包含一个长度可变的选项部分，需要指定这个TCP报文段到底有多长。它指出 TCP 报文段的数据起始处距离 TCP 报文段的起始处有多远。该字段的单位是32位</span><span style="color:#39ADB5;">(</span><span style="color:#90A4AE;">即4个字节为计算单位），4位二进制最大表示15，所以数据偏移也就是TCP首部最大60字节</span></span>
<span class="line"><span style="color:#F76D47;">5</span><span style="color:#90A4AE;">、SYN：同步标志位，用于建立会话连接，同步序列号；</span></span>
<span class="line"><span style="color:#F76D47;">6</span><span style="color:#90A4AE;">、ACK：确认标志位，对已接收的数据包进行确认；</span></span>
<span class="line"><span style="color:#F76D47;">7</span><span style="color:#90A4AE;">、FIN：完成标志位，表示我已经没有数据要发送了，即将关闭连接；</span></span>
<span class="line"><span style="color:#F76D47;">8</span><span style="color:#90A4AE;">、PSH：推送标志位，表示该数据包被对方接收后应立即交给上层应用，而不在缓冲区排队；</span></span>
<span class="line"><span style="color:#F76D47;">9</span><span style="color:#90A4AE;">、RST：重置标志位，用于连接复位、拒绝错误和非法的数据包；</span></span>
<span class="line"><span style="color:#F76D47;">10</span><span style="color:#90A4AE;">、URG：紧急标志位，表示数据包的紧急指针域有效，用来保证连接不被阻断，并督促中间设备尽快处理；</span></span>
<span class="line"><span style="color:#F76D47;">11</span><span style="color:#90A4AE;">、窗口大小：表示现在允许对方发送的数据量，也就是告诉对方，从本报文段的确认号开始允许对方发送的数据量，达到此值，需要ACK确认后才能再继续传送后面数据，由Window size value * Window size scaling factor（此值在三次握手阶段TCP选项Window scale协商得到）得出此值</span></span>
<span class="line"><span style="color:#F76D47;">12</span><span style="color:#90A4AE;">、校验和：提供额外的可靠性</span></span>
<span class="line"><span style="color:#F76D47;">13</span><span style="color:#90A4AE;">、紧急指针：标记紧急数据在数据字段中的位置</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_8-1-tcp三次握手" tabindex="-1">8.1 TCP三次握手 <a class="header-anchor" href="#_8-1-tcp三次握手" aria-label="Permalink to &quot;8.1 TCP三次握手&quot;">​</a></h3><p><img src="http://pic.justdoiit.top/imgs/2023_10_978e3bce5b54c2a8649e97d03e636c9e.png" alt="" loading="lazy"> 第一次握手： 客户端将TCP报文标志位SYN置为1，随机产生一个序号值seq=J，保存在TCP首部的序列号(Sequence Number)字段里，指明客户端打算连接的服务器的端口，并将该数据包发送给服务器端，发送完毕后，客户端进入SYN_SENT状态，等待服务器端确认。</p><p>第二次握手： 服务器端收到数据包后由标志位SYN=1知道客户端请求建立连接，服务器端将TCP报文标志位SYN和ACK都置为1，ack=J+1，随机产生一个序号值seq=K，并将该数据包发送给客户端以确认连接请求，服务器端进入SYN_RCVD状态。</p><p>第三次握手： 客户端收到确认后，检查ack是否为J+1，ACK是否为1，如果正确则将标志位ACK置为1，ack=K+1，并将该数据包发送给服务器端，服务器端检查ack是否为K+1，ACK是否为1，如果正确则连接建立成功，客户端和服务器端进入ESTABLISHED状态，完成三次握手，随后客户端与服务器端之间可以开始传输数据了。</p><h3 id="_8-2-tcp四次挥手" tabindex="-1">8.2 TCP四次挥手 <a class="header-anchor" href="#_8-2-tcp四次挥手" aria-label="Permalink to &quot;8.2 TCP四次挥手&quot;">​</a></h3><p><img src="http://pic.justdoiit.top/imgs/2023_10_0d8868e9a049af79791f36f5a525c395.png" alt="" loading="lazy"> 第一次挥手： Client端发起挥手请求，向Server端发送标志位是FIN报文段，设置序列号seq，此时，Client端进入FIN_WAIT_1状态，这表示Client端没有数据要发送给Server端了。</p><p>第二次分手： Server端收到了Client端发送的FIN报文段，向Client端返回一个标志位是ACK的报文段，ack设为seq加1，Client端进入FIN_WAIT_2状态，Server端告诉Client端，我确认并同意你的关闭请求。</p><p>第三次分手： Server端向Client端发送标志位是FIN的报文段，请求关闭连接，同时Client端进入LAST_ACK状态。</p><p>第四次分手： Client端收到Server端发送的FIN报文段，向Server端发送标志位是ACK的报文段，然后Client端进入TIME_WAIT状态。Server端收到Client端的ACK报文段以后，就关闭连接。此时，Client端等待2MSL的时间后依然没有收到回复，则证明Server端已正常关闭，那好，Client端也可以关闭连接了。</p><h2 id="_9-ip地址总结" tabindex="-1">9 IP地址总结 <a class="header-anchor" href="#_9-ip地址总结" aria-label="Permalink to &quot;9 IP地址总结&quot;">​</a></h2><p>总结IP地址 A, B, C, D 类,并解析IP地址的组成</p><h3 id="_9-1-ip地址的组成" tabindex="-1">9.1 IP地址的组成 <a class="header-anchor" href="#_9-1-ip地址的组成" aria-label="Permalink to &quot;9.1 IP地址的组成&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">它们可唯一标识</span><span style="color:#91B859;"> IP</span><span style="color:#91B859;"> 网络中的每台设备</span><span style="color:#91B859;"> ，每台主机（计算机、网络设备、外围设备）必须具有唯一的地址（ip地址可以实现逻辑管理功能）</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">IP地址由两部分组成：</span></span>
<span class="line"><span style="color:#E2931D;">IP地址</span><span style="color:#91B859;">=网络位+主机位</span></span>
<span class="line"><span style="color:#E2931D;">-</span><span style="color:#91B859;"> 网络位：标识的是internet上的一个子网</span></span>
<span class="line"><span style="color:#E2931D;">-</span><span style="color:#91B859;"> 主机位：标识的子网中的某台主机</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">网络</span><span style="color:#91B859;"> ID：标识网络，每个网段分配一个网络ID，处于高位</span></span>
<span class="line"><span style="color:#E2931D;">主机</span><span style="color:#91B859;"> ID：标识单个主机，由组织分配给各设备，处于低位</span></span>
<span class="line"><span style="color:#E2931D;">IPv4地址格式：点分十进制记法</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_9-2-ip地址的分类" tabindex="-1">9.2 IP地址的分类 <a class="header-anchor" href="#_9-2-ip地址的分类" aria-label="Permalink to &quot;9.2 IP地址的分类&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">A类地址：</span></span>
<span class="line"><span style="color:#E2931D;">0</span><span style="color:#F76D47;"> 0000000</span><span style="color:#91B859;"> -</span><span style="color:#F76D47;"> 0</span><span style="color:#91B859;"> 1111111.X.Y.Z</span><span style="color:#91B859;"> :</span><span style="color:#91B859;"> 0-127.X.Y.Z</span></span>
<span class="line"><span style="color:#E2931D;">网络ID位是最高8位,主机ID是24位低位</span></span>
<span class="line"><span style="color:#E2931D;">网络数：126</span><span style="color:#91B859;">=2^7</span><span style="color:#90A4AE;">(</span><span style="color:#91B859;">可变是的网络ID位数</span><span style="color:#90A4AE;">)-2</span></span>
<span class="line"><span style="color:#E2931D;">每个网络中的主机数：2^24-2</span><span style="color:#91B859;">=16777214</span></span>
<span class="line"><span style="color:#E2931D;">默认子网掩码：255.0.0.0</span></span>
<span class="line"><span style="color:#E2931D;">私网地址：10.0.0.0</span></span>
<span class="line"><span style="color:#E2931D;">范例:114.114.114.114,8.8.8.8,1.1.1.1,123.56.174.200,119.29.29.29</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">B类地址：</span></span>
<span class="line"><span style="color:#E2931D;">10</span><span style="color:#F76D47;"> 000000</span><span style="color:#91B859;"> -</span><span style="color:#F76D47;"> 10</span><span style="color:#91B859;"> 111111.X.Y.Z：128-191.X.Y.Z</span></span>
<span class="line"><span style="color:#E2931D;">网络ID位是最高16位,主机ID是16位低位</span></span>
<span class="line"><span style="color:#E2931D;">网络数：2^14</span><span style="color:#91B859;">=16384</span></span>
<span class="line"><span style="color:#E2931D;">每个网络中的主机数：2^16-2</span><span style="color:#91B859;">=65534</span></span>
<span class="line"><span style="color:#E2931D;">默认子网掩码：255.255.0.0</span></span>
<span class="line"><span style="color:#E2931D;">私网地址：172.16.0.0-172.31.0.0</span></span>
<span class="line"><span style="color:#E2931D;">范例:180.76.76.76，172.16.0.1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">C类地址：</span></span>
<span class="line"><span style="color:#E2931D;">110</span><span style="color:#F76D47;"> 0</span><span style="color:#F76D47;"> 0000</span><span style="color:#91B859;"> -</span><span style="color:#F76D47;"> 110</span><span style="color:#F76D47;"> 1</span><span style="color:#91B859;"> 1111.X.Y.Z:</span><span style="color:#91B859;"> 192-223.X.Y.Z</span></span>
<span class="line"><span style="color:#E2931D;">网络ID位是最高24位,主机ID是8位低位</span></span>
<span class="line"><span style="color:#E2931D;">网络数：2^21</span><span style="color:#91B859;">=2097152</span></span>
<span class="line"><span style="color:#E2931D;">每个网络中的主机数：2^8-2</span><span style="color:#91B859;">=254</span></span>
<span class="line"><span style="color:#E2931D;">默认子网掩码：255.255.255.0</span></span>
<span class="line"><span style="color:#E2931D;">私网地址：192.168.0.0-192.168.255.0</span></span>
<span class="line"><span style="color:#E2931D;">范例:</span><span style="color:#91B859;"> 223.6.6.6,223.5.5.5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">D类地址：</span></span>
<span class="line"><span style="color:#E2931D;">组（多）播，1110</span><span style="color:#F76D47;"> 0000</span><span style="color:#91B859;"> -</span><span style="color:#F76D47;"> 1110</span><span style="color:#91B859;"> 1111.X.Y.Z:</span><span style="color:#91B859;"> 224-239.X.Y.Z</span></span>
<span class="line"><span style="color:#E2931D;">E类：保留未使用，240-255</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="_10-主机数-子网掩码计算" tabindex="-1">10 主机数，子网掩码计算 <a class="header-anchor" href="#_10-主机数-子网掩码计算" aria-label="Permalink to &quot;10 主机数，子网掩码计算&quot;">​</a></h2><p><code>201.222.200.111/18</code>计算主机数？子网掩码？说明计算方法。<br><code>结果</code>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">主机数</span><span style="color:#91B859;"> =</span><span style="color:#91B859;"> 2^</span><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">32-18</span><span style="color:#39ADB5;">)</span><span style="color:#91B859;">-2</span><span style="color:#91B859;"> =</span><span style="color:#F76D47;"> 16382</span></span>
<span class="line"><span style="color:#E2931D;">子网掩码</span><span style="color:#91B859;"> =</span><span style="color:#F76D47;"> 255.255.192.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>计算方法</code>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">CIDR：无类域间路由，目前的网络已不再按A，B，C类划分网段，可以任意指定网段的范围</span></span>
<span class="line"><span style="color:#E2931D;">CIDR无类域间路由表示法：IP/网络ID位数，如：172.16.0.100/16</span></span>
<span class="line"><span style="color:#E2931D;">netmask子网掩码：32位或128位（IPv6）的数字，和IP成对使用，用来确认IP地址中的网络ID和主机ID，对应网络ID的位为1，对应主机ID的位为0,范例:255.255.255.0</span><span style="color:#91B859;"> ，表现为连续的高位为1，连续的低位为0</span></span>
<span class="line"><span style="color:#39ADB5;">**</span><span style="color:#90A4AE;">主机数</span><span style="color:#39ADB5;">**</span></span>
<span class="line"><span style="color:#E2931D;">CIDR表示法显示网络id是前18位，所以主机id为后14位，主机数</span><span style="color:#91B859;">=2^14-2=16382</span></span>
<span class="line"><span style="color:#39ADB5;">**</span><span style="color:#90A4AE;">子网掩码</span><span style="color:#39ADB5;">**</span></span>
<span class="line"><span style="color:#E2931D;">子网掩码</span></span>
<span class="line"><span style="color:#E2931D;">主机IP为</span><span style="color:#91B859;"> 201.222.200.111/18</span></span>
<span class="line"><span style="color:#E2931D;">根据CIDRD对应的子网掩码为：255.255.11000000.0</span><span style="color:#91B859;"> 转换成二进制就是255.255.192.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_11-提取本机ip" tabindex="-1">11 提取本机ip <a class="header-anchor" href="#_11-提取本机ip" aria-label="Permalink to &quot;11 提取本机ip&quot;">​</a></h2><p>通过ifconfig命令结果找到ip地址</p><pre><code>ifconfig ens32 | sed -n &#39;/inet /p&#39; | sed &#39;s/inet \\([0-9.]\\+\\).*/\\1/&#39;
</code></pre><h2 id="_12-检测在线的主机" tabindex="-1">12 检测在线的主机 <a class="header-anchor" href="#_12-检测在线的主机" aria-label="Permalink to &quot;12 检测在线的主机&quot;">​</a></h2><p>使用脚本判断 你主机所在网络内在线的主机IP有哪些？ ping通则在线</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#39ADB5;font-style:italic;"> for</span><span style="color:#90A4AE;"> i </span><span style="color:#39ADB5;font-style:italic;">in</span><span style="color:#39ADB5;"> $(</span><span style="color:#E2931D;">seq</span><span style="color:#F76D47;"> 254</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;"> do</span></span>
<span class="line"><span style="color:#E2931D;">     ping</span><span style="color:#91B859;"> -c1</span><span style="color:#91B859;"> 192.168.1.</span><span style="color:#39ADB5;">\${</span><span style="color:#90A4AE;">i</span><span style="color:#39ADB5;">}</span><span style="color:#39ADB5;"> &gt;&gt;</span><span style="color:#91B859;"> /dev/null</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">     if</span><span style="color:#39ADB5;"> [</span><span style="color:#90A4AE;"> $? </span><span style="color:#39ADB5;">-eq</span><span style="color:#F76D47;"> 0</span><span style="color:#39ADB5;"> ];</span><span style="color:#39ADB5;font-style:italic;">then</span></span>
<span class="line"><span style="color:#6182B8;">         echo</span><span style="color:#39ADB5;"> &quot;</span><span style="color:#91B859;">192.168.1.</span><span style="color:#39ADB5;">\${</span><span style="color:#90A4AE;">i</span><span style="color:#39ADB5;">}&quot;</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">     fi</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;"> done</span></span>
<span class="line"></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;"> for</span><span style="color:#90A4AE;"> i </span><span style="color:#39ADB5;font-style:italic;">in</span><span style="color:#39ADB5;"> {</span><span style="color:#E2931D;">1..254}</span><span style="color:#39ADB5;">;</span><span style="color:#39ADB5;font-style:italic;"> do</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">    if</span><span style="color:#E2931D;"> ping</span><span style="color:#91B859;"> -c1</span><span style="color:#91B859;"> -W1</span><span style="color:#91B859;"> 192.168.1.</span><span style="color:#90A4AE;">$i </span><span style="color:#39ADB5;">&amp;&gt;</span><span style="color:#90A4AE;"> /dev/null</span><span style="color:#39ADB5;">;</span><span style="color:#39ADB5;font-style:italic;"> then</span></span>
<span class="line"><span style="color:#6182B8;">        echo</span><span style="color:#91B859;"> 192.168.1.</span><span style="color:#90A4AE;">$i </span><span style="color:#91B859;">is</span><span style="color:#91B859;"> up</span><span style="color:#39ADB5;"> |</span><span style="color:#E2931D;"> tee</span><span style="color:#91B859;"> hosts.txt</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;">    fi</span></span>
<span class="line"><span style="color:#39ADB5;font-style:italic;"> done</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,84),o=[e];function r(c,t,i,y,b,u){return a(),n("div",null,o)}const A=s(p,[["render",r]]);export{d as __pageData,A as default};
