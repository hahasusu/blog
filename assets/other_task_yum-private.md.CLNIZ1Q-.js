import{_ as a,c as s,o as n,a4 as e}from"./chunks/framework.GYzjcnJh.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"other/task/yum-private.md","filePath":"other/task/yum-private.md"}'),l={name:"other/task/yum-private.md"},p=e(`<p>+++ title = &#39;搭建yum私有仓库&#39; slug = &#39;Yum Private&#39; date = 2023-10-12T14:14:51+08:00 draft = false tags = [&quot;yum&quot;] categories = [] hidden = false +++</p><h2 id="一-简要" tabindex="-1">一 简要 <a class="header-anchor" href="#一-简要" aria-label="Permalink to &quot;一 简要&quot;">​</a></h2><p>yum仓库必要的目录</p><ul><li>Packages:</li><li>repodata:</li></ul><h2 id="二-基于ios镜像制作" tabindex="-1">二 基于IOS镜像制作 <a class="header-anchor" href="#二-基于ios镜像制作" aria-label="Permalink to &quot;二 基于IOS镜像制作&quot;">​</a></h2><p><strong>准备2台虚拟机</strong></p><ol><li>centos7(用作yum仓库的服务器), ip: <code>192.168.1.101</code></li><li>centos7(测试机器), ip: <code>192.168.1.102</code></li></ol><h3 id="_2-1-挂载iso" tabindex="-1">2.1 挂载ISO <a class="header-anchor" href="#_2-1-挂载iso" aria-label="Permalink to &quot;2.1 挂载ISO&quot;">​</a></h3><p><code>autofs</code>: 自动挂载服务</p><ul><li>yum install -y autofs</li><li>systemctl enable --now autofs</li></ul><h3 id="_2-2-创建yum仓库的目录" tabindex="-1">2.2 创建yum仓库的目录 <a class="header-anchor" href="#_2-2-创建yum仓库的目录" aria-label="Permalink to &quot;2.2 创建yum仓库的目录&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">mkdir</span><span style="color:#91B859;"> -p</span><span style="color:#91B859;"> /data/centos/7/x86_64</span></span>
<span class="line"><span style="color:#E2931D;">cp</span><span style="color:#91B859;"> -r</span><span style="color:#91B859;"> /misc/cd/Packages</span><span style="color:#91B859;"> /data/centos/7/x86_64</span></span>
<span class="line"><span style="color:#E2931D;">cp</span><span style="color:#91B859;"> -r</span><span style="color:#91B859;"> /misc/cd/repodata</span><span style="color:#91B859;"> /data/centos/7/x86_64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-3-使用python提供http服务" tabindex="-1">2.3 使用python提供http服务 <a class="header-anchor" href="#_2-3-使用python提供http服务" aria-label="Permalink to &quot;2.3 使用python提供http服务&quot;">​</a></h3><p>目录<code>/data/</code>执行: <code>python3 -m http.server 8000 &amp;&gt; /dev/null &amp;</code><br> 浏览器访问 <code>http://192.168.1.101:8000/centos/7/x86_64</code></p><h2 id="三-基于腾讯源的制作" tabindex="-1">三 基于腾讯源的制作 <a class="header-anchor" href="#三-基于腾讯源的制作" aria-label="Permalink to &quot;三 基于腾讯源的制作&quot;">​</a></h2><h3 id="reposync" tabindex="-1">reposync <a class="header-anchor" href="#reposync" aria-label="Permalink to &quot;reposync&quot;">​</a></h3><p><code>yum install -y reposync createrepo</code></p><ol><li>使用reposync同步国内的yum源，下载缓存rpm包到本地机器<br><code>reposync --repoid extras --download-metadata -p /data/centos/</code></li><li>使用createrepo命令制作一个本地内网yum仓库<br><code>createrepo -pdo /data/centos/extras/ /data/centos/extras/</code></li></ol><h2 id="四-测试本地yum仓库" tabindex="-1">四 测试本地yum仓库 <a class="header-anchor" href="#四-测试本地yum仓库" aria-label="Permalink to &quot;四 测试本地yum仓库&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#6182B8;">cd</span><span style="color:#91B859;"> /etc/yum.repo.d/</span></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># 备份CentOS-Repo.repo</span></span>
<span class="line"><span style="color:#E2931D;">mv</span><span style="color:#91B859;"> CentOS-Base.repo</span><span style="color:#91B859;"> CentOS-Base.repo.bak</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">vim</span><span style="color:#91B859;"> CentOS-Base.repo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#90A4AE;font-style:italic;"># /etc/yum.repo.d/CentOS-Base.repo</span></span>
<span class="line"><span style="color:#39ADB5;">[</span><span style="color:#90A4AE;">private</span><span style="color:#39ADB5;">]</span></span>
<span class="line"><span style="color:#90A4AE;">name</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">private-yum</span></span>
<span class="line"><span style="color:#90A4AE;">baseurl</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">http://192.168.1.101:8000/centos/7/x86_64</span></span>
<span class="line"><span style="color:#90A4AE;">gpgcheck</span><span style="color:#39ADB5;">=</span><span style="color:#91B859;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E2931D;">yum</span><span style="color:#91B859;"> clean</span><span style="color:#91B859;"> all</span></span>
<span class="line"><span style="color:#E2931D;">yum</span><span style="color:#91B859;"> repolist</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>`,20),o=[p];function t(r,c,i,d,u,m){return n(),s("div",null,o)}const b=a(l,[["render",t]]);export{h as __pageData,b as default};
