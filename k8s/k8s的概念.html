<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>博客展示ovo-博客展示ovo</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.3.1">
    <link rel="preload stylesheet" href="/blog/assets/style.C3IpHLV0.css" as="style">
    <script type="module" src="/blog/assets/chunks/metadata.1c2bbd70.js"></script>
    <script type="module" src="/blog/assets/app.B-PRbVRY.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.GYzjcnJh.js">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.Cm92knlu.js">
    <link rel="modulepreload" href="/blog/assets/k8s_k8s的概念.md.DT-q6wJx.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar top" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-ab179fa1><a class="title" href="/blog/" data-v-ab179fa1><!--[--><!--]--><!----><span data-v-ab179fa1>一昂</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/linux/grep" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>Linux</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>前端</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>基础</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/blog/front/html/base" data-v-43f1e123><!--[-->HTML<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/blog/front/css/base" data-v-43f1e123><!--[-->CSS<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/blog/front/js" data-v-43f1e123><!--[-->JavaScript<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>框架</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/blog/front/bootstrap5" data-v-43f1e123><!--[-->BootStrap5<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-b6c34ac9><span class="text" data-v-b6c34ac9><!----><span data-v-b6c34ac9>后端</span><span class="vpi-chevron-down text-icon" data-v-b6c34ac9></span></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/nginx/install" data-v-43f1e123><!--[-->Nginx<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/backend/caddy" data-v-43f1e123><!--[-->Caddy<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/backend/docker/install" data-v-43f1e123><!--[-->Docker<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/db/mysql/install" data-v-43f1e123><!--[-->数据库<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/python/install" data-v-43f1e123><!--[-->Python3<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/backend/go/" data-v-43f1e123><!--[-->GoLang<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-43f1e123><a class="VPLink link" href="/blog/backend/java/" data-v-43f1e123><!--[-->Java<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/other/os" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>其它</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/devops/jenkins" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>运维</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/classical/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>玄</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/tools/some_tool_url" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>工具软件</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/network/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>网络</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/fq/clash-meta/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>科学</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/video/" tabindex="0" data-v-dc692963 data-v-9c663999><!--[--><span data-v-9c663999>视频</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/hahasusu" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/hahasusu" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/k8s%E7%9A%84%E6%A6%82%E5%BF%B5" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>k8s的概念</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/use" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>基本使用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/Flannel" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Flannel</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/configmap" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>configmap</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/core-dns" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>core-dns</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/harbor" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>harbor</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/helm" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>helm</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/ingress" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>ingress</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/k8s-cri" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>k8s-cri</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/k8s%E5%AD%98%E5%82%A8" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>k8s存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/k8s%E7%BD%91%E7%BB%9C" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>k8s网络</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/k8s%E5%AE%89%E8%A3%85" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>k8s安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/kubeadm" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>kubeadm</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/kubeadm%E5%88%9D%E5%A7%8B%E5%8C%96%E5%A4%B1%E8%B4%A5" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>kubeadm初始化失败</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/kubeadm%E9%83%A8%E7%BD%B2Kubernetes" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>kubeadm部署Kubernetes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/kubeasz%E9%83%A8%E7%BD%B2k8s" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>kubeasz部署k8s</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/%E5%9F%BA%E4%BA%8Eansible%E9%83%A8%E7%BD%B2K8s%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>基于ansible部署K8s高可用集群</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/ansible%E9%83%A8%E7%BD%B2k8s%E9%9B%86%E7%BE%A42" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>ansible部署k8s2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/kubectl" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>kubectl</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/%E5%AE%89%E8%A3%85%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>安装先决条件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/%E6%8E%A7%E5%88%B6%E5%99%A8" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>控制器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>数据存储</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/%E6%96%87%E6%A1%A3" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>文档</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>核心组件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/%E8%B5%84%E6%BA%90" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>资源</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/blog/k8s/rbac" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>认证RBAC</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>目录</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _blog_k8s_k8s%E7%9A%84%E6%A6%82%E5%BF%B5" data-v-39a288b8><div><h2 id="kubernetes架构" tabindex="-1">Kubernetes架构 <a class="header-anchor" href="#kubernetes架构" aria-label="Permalink to &quot;Kubernetes架构&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;"> 1.</span><span style="color:#91B859;"> etcd保存整个集群的状态</span></span>
<span class="line"><span style="color:#E2931D;"> 2.</span><span style="color:#91B859;"> apiserver提供了资源的唯一入口，并提供认证、授权、访问控制、API注册和发现等</span></span>
<span class="line"><span style="color:#E2931D;"> 3.</span><span style="color:#91B859;"> controller</span><span style="color:#91B859;"> manager负责维护集群的状态，比如故障检测、自动扩展、滚动更新等</span></span>
<span class="line"><span style="color:#E2931D;"> 4.</span><span style="color:#91B859;"> scheduler负责资源的调度，按照预定的调度策略将Pod调度到相应的机器上</span></span>
<span class="line"><span style="color:#E2931D;"> 5.</span><span style="color:#91B859;"> kubelet负责维护容器的生命周期，同时也负责Volume</span><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">CVI</span><span style="color:#39ADB5;">)</span><span style="color:#91B859;">和网络（CNI）的管理</span></span>
<span class="line"><span style="color:#E2931D;"> 6.</span><span style="color:#91B859;"> Container</span><span style="color:#91B859;"> runtime负责镜像的管理以及Pod和容器的真正运行</span><span style="color:#39ADB5;">(</span><span style="color:#E2931D;">CRI</span><span style="color:#39ADB5;">)</span></span>
<span class="line"><span style="color:#E2931D;"> 7.</span><span style="color:#91B859;"> kube-poxy负责为Service提供cluster内部的服务发现和负载均衡</span></span>
<span class="line"><span style="color:#90A4AE;">  </span></span>
<span class="line"><span style="color:#E2931D;">除了核心组件，还有一些推荐的组件：</span></span>
<span class="line"><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;"> 8.</span><span style="color:#91B859;"> kube-dns负责为整个集群提供DNS服务</span></span>
<span class="line"><span style="color:#E2931D;"> 9.</span><span style="color:#91B859;"> Ingress</span><span style="color:#91B859;"> Controller</span><span style="color:#91B859;"> 为服务提供外网入口</span></span>
<span class="line"><span style="color:#E2931D;"> 10.</span><span style="color:#91B859;"> Heapster提供资源监控</span></span>
<span class="line"><span style="color:#E2931D;"> 11.</span><span style="color:#91B859;"> Dashboard提供GUIFederation提供跨可用区的集群</span></span>
<span class="line"><span style="color:#E2931D;"> 12.</span><span style="color:#91B859;"> Fluentd-elasticsearch提供集群日志采集，存储与查询</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="http://pic.justdoiit.top/imgs/2024-03-13-1710299005.webp" alt="" loading="lazy"></p><h2 id="master节点" tabindex="-1">Master节点 <a class="header-anchor" href="#master节点" aria-label="Permalink to &quot;Master节点&quot;">​</a></h2><blockquote><p>集群控制管理节点，所有的命令都经由master处理</p></blockquote><h3 id="apiserver" tabindex="-1">apiserver <a class="header-anchor" href="#apiserver" aria-label="Permalink to &quot;apiserver&quot;">​</a></h3><blockquote><p>Kubernetes API，集群的统一入口，各组件协调者，以HTTP API提供接口服务，所有对象资源的增删改查和监听操作都交给APIServer处理后再提交给Etcd存储。</p></blockquote><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">负责处理来自用户的请求，其主要作用就是对外提供RESTful的接口</span></span>
<span class="line"><span style="color:#E2931D;">包括用于查看集群状态的读请求以及改变集群状态的写请求，也是唯一一个于etcd集群通信的组件。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>API Server负责接收K8S所有请求（来自UI界面或者CLI命令行工具），然后，API Server根据用户的具体请求，去通知其他组件干活。</p><h3 id="kube-controller-manager" tabindex="-1">kube-controller-manager <a class="header-anchor" href="#kube-controller-manager" aria-label="Permalink to &quot;kube-controller-manager&quot;">​</a></h3><p>处理集群中常规后台任务，一个资源对应一个控制器，而ControllerManager就是负责管理这些控制器的</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">管理器运行了一系列的控制器进程，这些进程会按照用户的期望状态在后台不断地调节整个集群中的对象，需要有高可用机制</span></span>
<span class="line"><span style="color:#E2931D;">当服务的状态发生改变，控制器就会发现这个改变并且开始向目标状态迁移。</span></span>
<span class="line"><span style="color:#E2931D;">由一系列控制器组成,通过apiserver监控整个集群的状态,并确保集群处于预期的工作状态</span></span>
<span class="line"><span style="color:#E2931D;">Node</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">       # 负责在节点出现故障时进行通知和响应</span></span>
<span class="line"><span style="color:#E2931D;">Deployment</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">   #pod控制器</span></span>
<span class="line"><span style="color:#E2931D;">Service</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">    #服务控制器</span></span>
<span class="line"><span style="color:#E2931D;">Volume</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">      #存储卷控制器</span></span>
<span class="line"><span style="color:#E2931D;">Endpoint</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">    #接入点控制器</span></span>
<span class="line"><span style="color:#E2931D;">Garbage</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">    #垃圾回收控制器</span></span>
<span class="line"><span style="color:#E2931D;">Namespace</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">    #名称空间控制器</span></span>
<span class="line"><span style="color:#E2931D;">Job</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">       # 监测代表一次性任务的 Job 对象，然后创建 Pod 来运行这些任务直至完成</span></span>
<span class="line"><span style="color:#E2931D;">Resource</span><span style="color:#91B859;"> quta</span><span style="color:#91B859;"> Controller</span><span style="color:#90A4AE;font-style:italic;">    #资源配额控制器</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="kube-scheduler" tabindex="-1">kube-scheduler <a class="header-anchor" href="#kube-scheduler" aria-label="Permalink to &quot;kube-scheduler&quot;">​</a></h3><blockquote><p>根据调度算法为新创建的Pod选择一个Node节点。</p></blockquote><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">调度器其实为kubernetes中运行的Pod选择部署的Worker节点</span></span>
<span class="line"><span style="color:#E2931D;">它会根据用户的需要选择最能满足请求的节点来运行Pod，它会在每次需要调度Pod时执行。</span></span>
<span class="line"><span style="color:#E2931D;">主要功能是接收调度pod到适合的运算节点上</span></span>
<span class="line"><span style="color:#E2931D;">预选策略(</span><span style="color:#91B859;"> predict</span><span style="color:#90A4AE;"> )</span></span>
<span class="line"><span style="color:#E2931D;">优选策略(</span><span style="color:#91B859;"> priorities</span><span style="color:#90A4AE;"> )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="node节点" tabindex="-1">Node节点 <a class="header-anchor" href="#node节点" aria-label="Permalink to &quot;Node节点&quot;">​</a></h2><blockquote><p>Node 是 Pod 真正运行的主机，可以是物理机，也可以是虚拟机。</p><p>为了管理 Pod，每个 Node 节点上至少要运行 container runtime（比如 docker 或者 rkt）、<code>kubelet</code> 和 <code>kube-proxy</code> 服务。</p><p>Node：是kubernetes集群的工作负载节点。Master为其分配工作，当某个Node宕机时，Master会将其工作负载自动转移到其他节点。</p></blockquote><h3 id="kubelet" tabindex="-1">kubelet <a class="header-anchor" href="#kubelet" aria-label="Permalink to &quot;kubelet&quot;">​</a></h3><blockquote><p>kubelet是 Master 在Node节点上的<code>Agent</code></p><p>管理本机运行容器的生命周期，比如创建容器、Pod挂载数据卷、下载secret、获取容器和节点状态等工作。kubelet将每个Pod转换成一组容器。</p></blockquote><h3 id="kube-proxy" tabindex="-1">kube-proxy <a class="header-anchor" href="#kube-proxy" aria-label="Permalink to &quot;kube-proxy&quot;">​</a></h3><p>在Node节点上实现Pod网络代理，维护网络规则和四层负载均衡工作</p><h2 id="pod" tabindex="-1">pod <a class="header-anchor" href="#pod" aria-label="Permalink to &quot;pod&quot;">​</a></h2><blockquote><p>Kubernetes 使用 Pod 来管理容器</p><p>Pod是最小部署单元，一个Pod由一个或多个容器组成，Pod中容器共享存储和网络，在同一台Docker主机上运行。</p><p>每个Pod都会包含一个 “根容器”，还会包含一个或者多个紧密相连的业务容器。</p></blockquote><ul><li>Pod运行在节点Node中；</li><li>Pod是对容器的封装，是k8s最小的调度单元，也是Kubernetes最重要的基本概念；</li><li>Pause容器简述：每个Pod都有一个特殊的被称为“根容器”的Pause容器，Pause容器对应的镜像属于Kubernetes平台的一部分</li><li><code>Kubernetes</code>为每个Pod都分配了唯一的IP地址，称之为Pod IP，一个Pod里的多个容器共享Pod IP。Kubernetes要求底层网络支持集群内任意两个Pod之间的TCP/IP直接通信，因此一个Pod容器与另外主机上的Pod容器能够直接通信。</li></ul><p><strong>pod清单:</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-lighter vp-code" tabindex="0"><code><span class="line"><span style="color:#E2931D;">apiVersion:</span><span style="color:#91B859;"> v1</span><span style="color:#90A4AE;font-style:italic;">         # Pod版本号为v1</span></span>
<span class="line"><span style="color:#E2931D;">kind:</span><span style="color:#91B859;"> Pod</span><span style="color:#90A4AE;font-style:italic;">              # 使用的资源类型为Pod</span></span>
<span class="line"><span style="color:#E2931D;">metadata:</span><span style="color:#90A4AE;">   </span></span>
<span class="line"><span style="color:#E2931D;">  name:</span><span style="color:#91B859;"> string</span><span style="color:#90A4AE;font-style:italic;">         # 当前Pod的名称，名字唯一</span></span>
<span class="line"><span style="color:#E2931D;">  namespace:</span><span style="color:#91B859;"> string</span><span style="color:#90A4AE;font-style:italic;">    # Pod所属的命名空间，默认值为default</span></span>
<span class="line"><span style="color:#E2931D;">  labels:</span><span style="color:#90A4AE;font-style:italic;">              # 自定义标签列表</span></span>
<span class="line"><span style="color:#E2931D;">    -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> string</span><span style="color:#90A4AE;font-style:italic;">     # 当前pod标签为“name=string”</span></span>
<span class="line"><span style="color:#E2931D;">  annotations:</span><span style="color:#90A4AE;font-style:italic;">         # 自定义注解列表</span></span>
<span class="line"><span style="color:#E2931D;">    -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> string</span></span>
<span class="line"><span style="color:#E2931D;">spec:</span><span style="color:#90A4AE;font-style:italic;">                  # Pod中的详细定义</span></span>
<span class="line"><span style="color:#E2931D;">  containers:</span><span style="color:#90A4AE;font-style:italic;">          # Pod的容器列表</span></span>
<span class="line"><span style="color:#E2931D;">  -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> string</span><span style="color:#90A4AE;font-style:italic;">       # 容器名字</span></span>
<span class="line"><span style="color:#E2931D;">    image:</span><span style="color:#91B859;"> string</span><span style="color:#90A4AE;font-style:italic;">      # 容器镜像</span></span>
<span class="line"><span style="color:#E2931D;">    imagePullPolicy:</span><span style="color:#90A4AE;font-style:italic;">          # 容器的镜像拉取策略</span></span>
<span class="line"><span style="color:#6182B8;">    command</span><span style="color:#91B859;">:</span><span style="color:#90A4AE;"> [string]         </span><span style="color:#90A4AE;font-style:italic;"># 容器的启动命令列表</span></span>
<span class="line"><span style="color:#E2931D;">    args:</span><span style="color:#90A4AE;"> [string]            </span><span style="color:#90A4AE;font-style:italic;"># 容器的启动命令参数列表</span></span>
<span class="line"><span style="color:#E2931D;">    workingDir:</span><span style="color:#91B859;"> String</span><span style="color:#91B859;">        容器的工作目录</span><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">    volumeMounts:</span><span style="color:#90A4AE;font-style:italic;">             # 挂载到容器内部的存储卷配置</span></span>
<span class="line"><span style="color:#E2931D;">    -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">            # 引用Pod定义的共享存储卷的名，需用Pod.spec.volumes[]部分定义的卷名</span></span>
<span class="line"><span style="color:#E2931D;">      mountPath:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">       # 存储卷在容器内的绝对路径</span></span>
<span class="line"><span style="color:#E2931D;">      readOnly:</span><span style="color:#91B859;"> boolean</span><span style="color:#90A4AE;font-style:italic;">       # 设置为只读模式，默认为false</span></span>
<span class="line"><span style="color:#E2931D;">  volumes:</span><span style="color:#90A4AE;font-style:italic;">                    # 在该Pod上定义共享存储卷列表</span></span>
<span class="line"><span style="color:#E2931D;">  -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">              # 共享存储卷名称,必须字母小写</span></span>
<span class="line"><span style="color:#E2931D;">    emptyDir:</span><span style="color:#91B859;"> {</span><span style="color:#91B859;"> }</span><span style="color:#90A4AE;font-style:italic;">             # 类型为emptyDir的存储卷，与Pod同生命周期的一个临时目录，为空值</span></span>
<span class="line"><span style="color:#E2931D;">    hostPath:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">          # 类型为hostPath的存储卷，表示挂载Pod所在宿主机的目录</span></span>
<span class="line"><span style="color:#E2931D;">    path:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">              # Pod所在宿主机的目录，将被用于同期中Mount的目录</span></span>
<span class="line"><span style="color:#E2931D;">  ports:</span><span style="color:#91B859;">                      容器需要暴露的端口库号列表</span></span>
<span class="line"><span style="color:#E2931D;">  -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> String</span><span style="color:#91B859;">              端口号名称</span></span>
<span class="line"><span style="color:#E2931D;">    containerPort:</span><span style="color:#91B859;"> Int</span><span style="color:#91B859;">        容器需要监听的端口号</span></span>
<span class="line"><span style="color:#E2931D;">    hostPort:</span><span style="color:#91B859;"> Int</span><span style="color:#91B859;">             可选，容器所在主机需要监听的端口号，默认与Container相同</span></span>
<span class="line"><span style="color:#E2931D;">  env:</span><span style="color:#90A4AE;font-style:italic;">                # 容器运行前需设置的环境变量列表</span></span>
<span class="line"><span style="color:#E2931D;">  -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">         # 环境变量名称</span></span>
<span class="line"><span style="color:#E2931D;">    value:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">        # 环境变量的值</span></span>
<span class="line"><span style="color:#E2931D;">  resources:</span><span style="color:#90A4AE;font-style:italic;">              # 资源限制和请求的设置</span></span>
<span class="line"><span style="color:#E2931D;">    limits:</span><span style="color:#90A4AE;font-style:italic;">              # 资源限制的设置</span></span>
<span class="line"><span style="color:#E2931D;">      cpu:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">          # Cpu的限制，单位为Core数，将用于docker run --cpu-shares参数，如果整数后跟m，表示占用权重，1Core=1000m</span></span>
<span class="line"><span style="color:#E2931D;">      memory:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">        # 内存限制，单位可以为Mib/Gib，将用于docker run --memory参数</span></span>
<span class="line"><span style="color:#E2931D;">    requests:</span><span style="color:#90A4AE;font-style:italic;">             # 资源请求的设置</span></span>
<span class="line"><span style="color:#E2931D;">      cpu:</span><span style="color:#91B859;"> string</span><span style="color:#90A4AE;font-style:italic;">          # CPU请求，容器启动的初始可用数量</span></span>
<span class="line"><span style="color:#E2931D;">      memory:</span><span style="color:#91B859;"> string</span><span style="color:#90A4AE;font-style:italic;">        # 内存请求，容器启动的初始可用数量</span></span>
<span class="line"><span style="color:#E2931D;">  livenessProbe:</span><span style="color:#90A4AE;font-style:italic;">         # 对Pod内容器健康检查设置，当探测无响应几次后将自动重启该容器，检查方法有exec、httpGet和tcpSocket，对一个容器只需设置其中一种方法即可。</span></span>
<span class="line"><span style="color:#6182B8;">    exec</span><span style="color:#91B859;">:</span><span style="color:#90A4AE;font-style:italic;">             # 对Pod容器内检查方式设置为exec方式</span></span>
<span class="line"><span style="color:#6182B8;">      command</span><span style="color:#91B859;">:</span><span style="color:#90A4AE;"> [String]   </span><span style="color:#90A4AE;font-style:italic;">#  exec方式需要制定的命令或脚本</span></span>
<span class="line"><span style="color:#E2931D;">    httpGet:</span><span style="color:#90A4AE;font-style:italic;">          #  对Pod容器内检查方式设置为HttpGet方式，需要指定path、port</span></span>
<span class="line"><span style="color:#E2931D;">      path:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">      #  网址URL路径（去除对应的域名或IP地址的部分）</span></span>
<span class="line"><span style="color:#E2931D;">      port:</span><span style="color:#91B859;"> Int</span><span style="color:#90A4AE;font-style:italic;">            #  对应端口</span></span>
<span class="line"><span style="color:#E2931D;">      host:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">          # 域名或IP地址</span></span>
<span class="line"><span style="color:#E2931D;">      schema:</span><span style="color:#91B859;"> String</span><span style="color:#90A4AE;font-style:italic;">         # 对应的检测协议，如http</span></span>
<span class="line"><span style="color:#E2931D;">      HttpHeaders:</span><span style="color:#90A4AE;font-style:italic;">           # 指定报文头部信息</span></span>
<span class="line"><span style="color:#E2931D;">      -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> String</span></span>
<span class="line"><span style="color:#E2931D;">        value:</span><span style="color:#91B859;"> String</span></span>
<span class="line"><span style="color:#E2931D;">    tcpSocket:</span><span style="color:#90A4AE;font-style:italic;">               # 对Pod容器内检查方式设置为tcpSocket方式</span></span>
<span class="line"><span style="color:#E2931D;">      port:</span><span style="color:#91B859;"> Int</span></span>
<span class="line"><span style="color:#E2931D;">    initialDelaySeconds:</span><span style="color:#91B859;"> Int</span><span style="color:#90A4AE;font-style:italic;">  # 容器启动完成后首次探测的时间，单位为秒</span></span>
<span class="line"><span style="color:#E2931D;">    timeoutSeconds:</span><span style="color:#91B859;"> Int</span><span style="color:#90A4AE;font-style:italic;">       # 对容器健康检查探测等待响应的超时时间，单位为秒，默认为1秒</span></span>
<span class="line"><span style="color:#E2931D;">    periodSeconds:</span><span style="color:#91B859;"> Int</span><span style="color:#90A4AE;font-style:italic;">        # 对容器监控检查的定期探测时间设置，单位为秒，默认10秒一次</span></span>
<span class="line"><span style="color:#E2931D;">    successThreshold:</span><span style="color:#91B859;"> Int</span><span style="color:#90A4AE;font-style:italic;">     # 探测几次成功后认为成功</span></span>
<span class="line"><span style="color:#E2931D;">    failureThreshold:</span><span style="color:#91B859;"> Int</span><span style="color:#90A4AE;font-style:italic;">    # 探测几次失败后认为失败</span></span>
<span class="line"><span style="color:#E2931D;">    securityContext:</span></span>
<span class="line"><span style="color:#E2931D;">      privileged:</span><span style="color:#39ADB5;"> false</span></span>
<span class="line"><span style="color:#E2931D;">  restartPolicy:</span><span style="color:#90A4AE;font-style:italic;">          # Pod的重启策</span></span>
<span class="line"><span style="color:#E2931D;">  nodeSelector:</span><span style="color:#91B859;">              设置NodeSelector表示将该Pod调度到包含这个label的node上，以Key:Value的格式指定</span></span>
<span class="line"><span style="color:#E2931D;">    Key:</span><span style="color:#91B859;"> Value</span><span style="color:#91B859;">               调度到指定的标签Node上</span></span>
<span class="line"><span style="color:#E2931D;">  imagePullSecrets:</span><span style="color:#91B859;">          Pull镜像时使用的secret名称，以Key:SecretKey格式指定</span></span>
<span class="line"><span style="color:#E2931D;">  -</span><span style="color:#91B859;"> name:</span><span style="color:#91B859;"> String</span></span>
<span class="line"><span style="color:#E2931D;">  hostNetwork:</span><span style="color:#39ADB5;"> false</span><span style="color:#91B859;">         是否使用主机网络模式，默认为false，如果设置为true，表示使用宿主机网络</span></span>
<span class="line"><span style="color:#90A4AE;"> </span></span>
<span class="line"><span style="color:#E2931D;">  secret:</span><span style="color:#91B859;">                    类型为Secret的存储卷，挂载集群与定义的Secret对象到容器内部</span></span>
<span class="line"><span style="color:#E2931D;">    secretname:</span><span style="color:#91B859;"> String</span></span>
<span class="line"><span style="color:#E2931D;">    items:</span><span style="color:#91B859;">                   当仅需挂载一个Secret对象中的指定Key时使用</span></span>
<span class="line"><span style="color:#E2931D;">    -</span><span style="color:#91B859;"> key:</span><span style="color:#91B859;"> String</span></span>
<span class="line"><span style="color:#E2931D;">     path:</span><span style="color:#91B859;"> String</span></span>
<span class="line"><span style="color:#E2931D;">  configMap:</span><span style="color:#90A4AE;font-style:italic;">               # 类型为ConfigMap的存储卷，挂载预定义的ConfigMap对象到容器内部</span></span>
<span class="line"><span style="color:#E2931D;">    name:</span><span style="color:#91B859;"> String</span></span>
<span class="line"><span style="color:#E2931D;">    items:</span><span style="color:#90A4AE;font-style:italic;">                 # 当仅需挂载一个ConfigMap对象中的指定Key时使用</span></span>
<span class="line"><span style="color:#E2931D;">    -</span><span style="color:#91B859;"> key:</span><span style="color:#91B859;"> String</span></span>
<span class="line"><span style="color:#E2931D;">      path:</span><span style="color:#91B859;"> String</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div><h2 id="复制控制器-replication-controller-rc" tabindex="-1">复制控制器（Replication Controller，RC） <a class="header-anchor" href="#复制控制器-replication-controller-rc" aria-label="Permalink to &quot;复制控制器（Replication Controller，RC）&quot;">​</a></h2><p>动态更新Pid的副本数</p><p>RC是K8s集群中最早的保证Pod高可用的API对象。通过监控运行中的Pod来保证集群中运行指定数目的Pod副本。指定的数目可以是多个也可以是1个；少于指定数目，RC就会启动运行新的Pod副本；多于指定数目，RC就会杀死多余的Pod副本。</p><h2 id="副本集-replica-set-rs" tabindex="-1">副本集（Replica Set，RS） <a class="header-anchor" href="#副本集-replica-set-rs" aria-label="Permalink to &quot;副本集（Replica Set，RS）&quot;">​</a></h2><p>RS是新一代RC，提供同样的高可用能力，区别主要在于RS后来居上，能支持更多种类的匹配模式。副本集一般不单独使用，而是作为Deployment的理想状态参数使用。</p><h2 id="部署-deployment" tabindex="-1">部署(Deployment) <a class="header-anchor" href="#部署-deployment" aria-label="Permalink to &quot;部署(Deployment)&quot;">​</a></h2><p>部署表示用户对K8s集群的一次更新操作。部署是一个比RS应用模式更广的API对象，可以是创建一个新的服务，更新一个新的服务，也可以是滚动升级一个服务。滚动升级一个服务，实际是创建一个新的RS，然后逐渐将新RS中副本数增加到理想状态，将旧RS中的副本数减小到0的复合操作；这样一个复合操作用一个RS是不太好描述的，所以用一个更通用的Deployment来描述。以K8s的发展方向，未来对所有长期伺服型的的业务的管理，都会通过Deployment来管理。</p><h2 id="服务-service" tabindex="-1">服务（Service） <a class="header-anchor" href="#服务-service" aria-label="Permalink to &quot;服务（Service）&quot;">​</a></h2><p>Service一个应用服务抽象，定义了Pod逻辑集合和访问这个Pod集合的策略。Service代理Pod集合对外表现是为一个访问入口，分配一个集群IP地址，来自这个IP的请求将负载均衡转发后端Pod中的容器。Service通过LableSelector选择一组Pod提供服务。</p><p>每个 Service 都会自动分配一个 cluster IP（仅在集群内部可访问的虚拟地址）和 DNS 名，其他容器可以通过该地址或 DNS 来访问服务，而不需要了解后端容器的运行。</p><p>在K8s集群中，客户端需要访问的服务就是Service对象。每个Service会对应一个集群内部有效的虚拟IP，集群内部通过虚拟IP访问一个服务。在K8s集群中微服务的负载均衡是由Kube-proxy实现的。Kube-proxy是K8s集群内部的负载均衡器。它是一个分布式代理服务器，在K8s的每个节点上都有一个；这一设计体现了它的伸缩性优势，需要访问服务的节点越多，提供负载均衡能力的Kube-proxy就越多，高可用节点也随之增多。与之相比，我们平时在服务器端做个反向代理做负载均衡，还要进一步解决反向代理的负载均衡和高可用问题。</p><p>“Service微服务”，kubernetes中的核心。通过分析、识别并建模系统中的所有服务为微服务，最终系统有多个提供不同业务能力而又彼此独立的微服务单元所组成，服务之间通过TCP/IP进行通信。每个Pod都会被分配一个单独的IP地址，而且每个Pod都提供了一个独立的Endpoint以被客户端访问。</p><p>客户端想要访问到Pod中的服务需要 部署负载均衡器，为Pod开启对外服务端口，将Pod的Endpoint列表加入转发列表中，客户端通过负载均衡器的对外IP+Port来访问此服务。每个Service都有一个全局唯一的虚拟ClusterIP，这样每个服务就变成了具备唯一IP地址的“通信节点”，服务调用就变成了最基础的TCP网络通信问题。</p><ul><li>在K8S的世界里,虽然每个Pod都会被分配一个单独的IP地址,但这个IP地址会随着Pod的销毁而消失</li><li>Service (服务)就是用来解决这个问题的核心概念</li><li>一个Service可以看作- -组提供相同服务的Pod的对外访问接口</li><li>Service作用于哪些Pod是通过标签选择器来定义的</li></ul><h2 id="存储卷-volume" tabindex="-1">存储卷（Volume） <a class="header-anchor" href="#存储卷-volume" aria-label="Permalink to &quot;存储卷（Volume）&quot;">​</a></h2><blockquote><p>数据卷，是Pod中能够被多个容器访问的共享目录。定义在Pod之上，被一个Pod里的多个容器挂载到具体的文件目录之下；与Pod生命周期相同。可以让一个Pod里的多个容器共享文件、让容器的数据写到宿主机的磁盘上或者写文件到 共享存储中</p></blockquote><p><strong>emptyDir:</strong></p><ul><li><p>emptyDir的生命周期与所属的pod相同。pod删除时，其emptyDir中的数据也会被删除。</p></li><li><p>emptyDir类型的volume在pod分配到node上时被创建，kubernetes会在node上自动分配 一个目录，因此无需指定宿主机node上对应的目录文件。</p></li><li><p>emptyDir Volume主要用于某些应用程序无需永久保存的临时目录，多个容器的共享目录等</p></li></ul><p><strong>hostPath</strong></p><ul><li>pod删除或者是调度到另外一个Node，原先Node上的存储卷还在。</li><li>hostPath Volume为pod挂载宿主机上的目录或文件，使得容器可以使用宿主机的文件系统进行存储。缺点是，在k8s中，pod都是动态在各node节点上调度。当一个pod在当前node节点上启动并通过hostPath存储了文件到本地以后，下次调度到另一个节点上启动时，就无法使用在之前节点上存储的文件。</li></ul></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><!----></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/blog/k8s/use" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>基本使用</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2024 备案号：<a href="https://beian.miit.gov.cn/" target="_blank">渝ICP备2024011833号</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>